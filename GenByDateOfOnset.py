#!/usr/bin/env python3.7
#coding:utf-8

# Daten aus den t√§glichen Berichten des RKI
import time
from matplotlib import pyplot as plt
from scipy.stats import beta
import pandas as pd
import datetime
import pickle
from matplotlib import rc
rc('font',**{'family':'sans-serif','sans-serif':['Helvetica']})
## for Palatino and other serif fonts use:
#rc('font',**{'family':'serif','serif':['Palatino']})
rc('text', usetex=True)

import numpy as np

import json

class GenByDateOfOnset(object):
	def __init__(self):
		self.byDateOfReporting,self.byDateOfReporting_RKI = self.GenerateData()
		self.dates = self.byDateOfReporting
				
	def GenerateData(self):
		daten = {}
		daten200304_beign = {200123:2,200124:1,200125:1,200127:2,200128:1,200129:1,200130:1,200131:1,200202:2,200203:1,200216:2,200217:2,200218:1,200219:1,200220:5,200221:3,200222:6,200223:6,200224:6,200225:16,200226:15,200227:6,200228:6,200229:4,200301:2,200302:1}
		daten200304_meldung = {200203:1,200211:2,200227:4,200228:13,200229:5,200301:14,200302:13,200303:1}
		daten200304_symptoms = {"symptoms_n":108,"no_symtmom":7,"cough_symtom":64}
		daten200304_origin = {"origin_n":228,"IR":11,"IT":51,"CN":2,"DE-NW":113,"DE-BY":28,"DE-BW":10}
		daten[200304] = {"bydate":daten200304_beign,"bydate_n":148-53,"bymeldung":daten200304_meldung,"bymeldung_n":53,"labtested_n":262,"symptoms":daten200304_symptoms,"origin":daten200304_origin}#,"alter":daten200304_alter,"alter_n":(147,)}
		
		daten200305_begin = {200225:17,200226:16,200227:9,200228:9,200229:9,200301:8,200302:3}
		daten200305_meldung = {200228:14,200301:16,200302:14,200303:18,200304:5}
		daten200305_symptoms = {"symptoms_n":134,"no_symtmom":8,"cough_symtom":78}
		daten200305_origin = {"origin_n":341,"IR":15,"IT":80,"CN":2,"DE-NW":172,"DE-BY":36,"DE-BW":10}
		daten[200305] = {"bydate":daten200305_begin,"bydate_n":197-81,"bymeldung":daten200305_meldung,"bymeldung_n":81,"labtested_n":400,"symptoms":daten200305_symptoms,"origin":daten200305_origin}
		
		daten200306_begin = {200217:3,200218:2,200219:2,200220:6,200221:5,200222:8,200223:9,200224:11,200225:19,200226:23,200227:15,200228:16,200229:15,200301:13,200302:10,200304:1}
		daten200306_meldung = {200226:1,200228:11,200301:15,200302:15,200303:14,200304:46,200305:12}
		daten200306_symptoms = {"symptoms_n":201,"no_symtmom":19,"cough_symtom":118}
		daten200306_origin = {"origin_n":452,"IR":17,"IT":111,"CN":2,"DE-NW":280,"DE-BY":36,"DE-BW":13}
		daten[200306] = {"bydate":daten200306_begin,"bymeldung":daten200306_meldung,"labtested_n":639,"symptoms":daten200306_symptoms,"origin":daten200306_origin}
		
		daten200307_begin = {200224:14,200225:21,200227:17,200228:18,200229:17,200301:18,200302:16,200303:4,200304:5,200305:5}
		daten200307_meldung = {200227:4,200303:14,200304:46,200305:55,200306:7}
		daten200307_symptoms = {"symptoms_n":247,"no_symtmom":11,"cough_symtom":146}
		daten200307_origin = {"IR":21,"IT":186,"CN":2,"DE-NW":302,"DE-BY":39,"DE-BW":16,"DE-BE":15}
		daten[200307] = {"bydate":daten200307_begin,"bymeldung":daten200307_meldung,"labtested_n":795,"symptoms":daten200307_symptoms,"origin":daten200307_origin}
		
		daten200308_begin = {200224:16,200225:21,200226:24,200227:21,200228:20,200229:22,200301:21,200302:23,200303:8,200304:9,200305:7,200306:1}
		daten200308_meldung = {200303:14,200304:53,200305:63,200306:22}
		daten200308_symptoms = {"symptoms_n":297,"no_symtmom":12,"cough_symtom":172,"pneumonia":6}
		daten200308_origin = {"IR":21,"IT":200,"CN":2,"DE-NW":306,"DE-BY":54,"DE-BW":22,"DE-BE":17}
		daten[200308] = {"bydate":daten200308_begin,"bymeldung":daten200308_meldung,"labtested_n":902,"symptoms":daten200307_symptoms,"origin":daten200308_origin}
		
		# 1000 cases
		daten200309_begin = {200216:2,200217:3,200218:2,200219:3,200220:6,200221:6,200222:7,200223:10,200224:18,200225:22,200226:26,200227:24,200228:26,200229:24,200301:23,200302:30,200303:12,200304:14,200305:8,200306:1,200307:1}
		daten200309_meldung = {200226:1,200227:4,200228:10,200229:4,200301:15,200302:13,200303:13,200304:48,200305:62,200306:29,200307:12,200308:18}
		daten200309_symptoms = {"symptoms_n":346,"no_symtmom":13,"cough_symtom":202,"pneumonia":7,"ICU":{"deaths":2}}
		daten200309_origin = {"foreign":262,"domestic":529}
		daten[200309] = {"bydate":daten200309_begin,"bymeldung":daten200309_meldung,"labtested_n":1139,"symptoms":daten200309_symptoms,"scaling":80,"deaths":2,"origin":daten200309_origin}
		
		daten200310_begin = {200216:2,200217:4,200218:2,200219:3,200220:7,200221:6,200222:8,200223:10,200224:19,200225:23,200226:30,200227:24,200228:33,200229:32,200301:25,200302:38,200303:20,200304:19,200305:14,200306:4,200307:2}
		daten200310_meldung = {200226:1,200227:4,200228:9,200229:4,200301:14,200302:13,200303:11,200304:48,200305:61,200306:56,200307:50,200308:25,200309:16}
		daten200310_symptoms = {"symptoms_n":420,"no_symtmom":17,"cough_symtom":202,"pneumonia":9}
#		daten200310_origin = {"IR":21,"IT":186,"CN":2,"DE-NW":302,"DE-BY":39,"DE-BW":16,"DE-BE":15}
		daten[200310] = {"bydate":daten200310_begin,"bymeldung":daten200310_meldung,"labtested_n":1296,"symptoms":daten200310_symptoms,"scaling":80,"deaths":2}
		
		daten200311_begin = {200216:2,200217:4,200218:2,200219:3,200220:9,200221:8,200222:8,200223:10,200224:21,200225:30,200226:40,200227:31,200228:38,200229:37,200301:36,200302:46,200303:40,200304:58,200305:36,200306:37,200307:31,200308:17,200309:7,200310:3}
		daten200311_meldung = {200226:1,200227:4,200228:9,200229:4,200301:14,200302:14,200303:13,200304:46,200305:59,200306:71,200307:49,200308:31,200309:104,200310:95,200311:1}
		daten200311_symptoms = {"symptoms_n":737,"no_symtmom":49,"cough_symtom":411,"pneumonia":12}
		daten[200311] = {"bydate":daten200311_begin,"bymeldung":daten200311_meldung,"labtested_n":1567,"transmitted":654,"symptoms":daten200311_symptoms,"deaths":3,"scaling":120}
		
		daten200312_begin = {200219:3,200220:9,200221:8,200222:10,200223:12,200224:27,200225:41,200226:60,200227:47,200228:54,200229:54,200301:51,200302:72,200303:61,200304:98,200305:72,200306:83,200307:106,200308:101,200309:43,200310:17,200311:5}
		daten200312_meldung = {200226:2,200227:5,200228:9,200229:3,200301:14,200302:13,200303:15,200304:52,200305:51,200306:79,200307:38,200308:31,200309:122,200310:184,200311:193,200312:9}
		daten200312_symptoms = {"symptoms_n":1317,"no_symtmom":79,"cough_symtom":737}
		daten[200312] = {"bydate":daten200312_begin,"bymeldung":daten200312_meldung,"labtested_n":2369,"transmitted":1089,"symptoms":daten200312_symptoms,"deaths":5,"scaling":250}
		
		daten200313_begin = {200219:3,200220:10,200221:8,200222:10,200223:13,200224:29,200225:44,200226:65,200227:53,200228:63,200229:63,200301:58,200302:89,200303:79,200304:122,200305:106,200306:120,200307:164,200308:172,200309:123,200310:78,200311:24}
		daten200313_meldung = {200226:1,200227:4,200228:9,200229:4,200301:13,200302:13,200303:16,200304:54,200305:43,200306:78,200307:34,200308:26,200309:115,200310:181,200311:228,200312:208,200313:14}
		daten200313_symptoms = {"symptoms_n":1855,"no_symtmom":100,"cough_symtom":1068}
		daten[200313] = {"bydate":daten200313_begin,"bymeldung":daten200313_meldung,"labtested_n":3062,"symptoms":daten200313_symptoms,"deaths":5,"scaling":280}
		
		daten200314_begin = {200223:13,200224:32,200225:49,200226:66,200227:62,200228:73,200229:72,200301:75,200302:103,200303:96,200304:139,200305:120,200306:155,200307:208,200308:247,200309:193,200310:169,200311:94,200312:19}
		daten200314_meldung = {200226:2,200227:5,200228:9,200229:4,200301:13,200302:12,200303:15,200304:46,200305:41,200306:79,200307:34,200308:25,200309:110,200310:187,200311:246,200312:291,200313:239,200314:2,}
		daten200314_symptoms = {"symptoms_n":2497,"no_symtmom":137,"cough_symtom":1432}
		daten[200314] = {"bydate":daten200314_begin,"bymeldung":daten200314_meldung,"labtested_n":3795,"symptoms":daten200314_symptoms,"deaths":8,"scaling":400}
		
		daten200315_begin = {200223:17,200224:33,200225:55,200226:74,200227:69,200228:84,200229:83,200301:81,200302:111,200303:113,200304:157,200305:141,200306:166,200307:233,200308:299,200309:249,200310:223,200311:162,200312:58,200313:20,200314:6}
		daten200315_meldung = {200225:1,200226:2,200227:3,200228:9,200229:4,200301:14,200302:11,200303:13,200304:44,200305:39,200306:60,200307:35,200308:26,200309:98,200310:195,200311:241,200312:314,200313:356,200314:220}
		daten200315_symptoms = {"symptoms_n":3024,"no_symtmom":161,"cough_symtom":1710}
		daten[200315] = {"bydate":daten200315_begin,"bymeldung":daten200315_meldung,"labtested_n":4195,"symptoms":daten200315_symptoms,"deaths":12,"scaling":450}
		
		daten200316_begin = {200225:57,200226:83,200227:75,200228:90,200229:86,200301:89,200302:118,200303:121,200304:178,200305:159,200306:193,200307:263,200308:345,200309:323,200310:334,200311:272,200312:135,200313:54,200314:15,200315:4}
		daten200316_meldung = {200226:4,200227:5,200228:10,200229:4,200301:13,200302:9,200303:14,200304:42,200305:38,200306:53,200307:34,200308:26,200309:94,200310:189,200311:252,200312:330,200313:486,200314:415,200315:283,200316:24}
		daten200316_symptoms = {"symptoms_n":3862,"no_symtmom":199,"cough_symtom":2139}
		daten200316_origin = {"foreign":262+2781,"domestic":529+2027}
		daten[200316] = {"bydate":daten200316_begin,"bymeldung":daten200316_meldung,"labtested_n":6012,"symptoms":daten200316_symptoms,"deaths":12,"scaling":600,"origin":daten200316_origin}
		
		daten200317_begin = {200224:32,200225:58,200226:88,200227:74,200228:97,200229:88,200301:92,200302:127,200303:126,200304:198,200305:175,200306:234,200307:314,200308:393,200309:428,200310:489,200311:447,200312:280,200313:162,200314:69,200315:13}
		daten200317_meldung = {200226:3,200227:6,200228:11,200229:2,200301:12,200302:10,200303:11,200304:41,200305:39,200306:52,200307:34,200308:26,200309:86,200310:182,200311:233,200312:336,200313:524,200314:453,200315:393,200316:551,200317:16}
		daten200317_symptoms = {"symptoms_n":5122,"no_symtmom":254,"cough_symtom":2870}
		daten[200317] = {"bydate":daten200317_begin,"bymeldung":daten200317_meldung,"labtested_n":7156,"symptoms":daten200317_symptoms,"deaths":12,"scaling":800}
		
		daten200318_begin = {200226:86,200227:75,200228:98,200229:90,200301:93,200302:132,200303:128,200304:211,200305:179,200306:254,200307:335,200308:418,200309:469,200310:532,200311:531,200312:368,200313:238,200314:114,200315:38,200316:13}
		daten200318_meldung = {200226:4,200227:6,200228:10,200229:6,200301:12,200302:12,200303:16,200304:45,200305:40,200306:53,200307:34,200308:26,200309:86,200310:187,200311:241,200312:356,200313:561,200314:551,200315:418,200316:622,200317:293}
		daten200318_symptoms = {"symptoms_n":5788,"no_symtmom":309,"cough_symtom":3197}
		daten[200318] = {"bydate":daten200318_begin,"bymeldung":daten200318_meldung,"labtested_n":8192,"symptoms":daten200318_symptoms,"deaths":12,"scaling":900}
		
		daten200319_begin = {200225:58,200226:89,200227:78,200228:101,200229:93,200301:94,200302:132,200303:129,200304:213,200305:180,200306:253,200307:338,200308:420,200309:468,200310:533,200311:533,200312:367,200313:239,200314:114,200315:41,200316:14}
		daten200319_meldung = {200226:3,200227:4,200228:10,200229:5,200301:11,200302:11,200303:13,200304:44,200305:41,200306:55,200307:31,200308:24,200309:86,200310:183,200311:237,200312:359,200313:558,200314:550,200315:414,200316:619,200317:291}
		daten200319_symptoms = {"symptoms_n":7719,"no_symtmom":372,"cough_symtom":4247}
		daten[200319] = {"bydate":daten200319_begin,"bymeldung":daten200319_meldung,"labtested_n":10999,"symptoms":daten200319_symptoms,"deaths":20,"scaling":900}
		
		daten200320_begin = {200224:35,200225:64,200226:98,200227:83,200228:111,200229:106,200301:103,200302:159,200303:151,200304:234,200305:207,200306:316,200307:415,200308:536,200309:658,200310:796,200311:923,200312:786,200313:713,200314:470,200315:359,200316:255,200317:84,200318:19,200319:7}
		daten200320_meldung = {200227:4,200228:8,200229:8,200301:9,200302:11,200303:15,200304:40,200305:37,200306:48,200307:30,200308:23,200309:90,200310:154,200311:221,200312:319,200313:531,200314:528,200315:386,200316:752,200317:1235,200318:1134,200319:547}
		daten200320_symptoms = {"symptoms_n":9725,"no_symtmom":456,"cough_symtom":5397}
		daten[200320] = {"bydate":daten200320_begin,"bymeldung":daten200320_meldung,"labtested_n":13957,"symptoms":daten200320_symptoms,"deaths":31,"scaling":1400}
		
		daten200321_begin = {200226:100,200227:84,200228:109,200229:104,200301:104,200302:162,200303:159,200304:235,200305:215,200306:333,200307:433,200308:582,200309:722,200310:884,200311:1060,200312:954,200313:903,200314:671,200315:567,200316:442,200317:201, 200318:81,200319:17,200320:3}
		daten200321_meldung = {200227:6,200228:14,200229:8,200301:11,200302:11,200303:15,200304:40,200305:40,200306:45,200307:35,200308:27,200309:83,200310:157,200311:215,200312:321,200313:526,200314:513,200315:395,200316:769,200317:1232,200318:1278,200319:999,200320:540}
		daten200321_symptoms = {"symptoms_n":11663,"no_symtmom":510,"cough_symtom":6433}
		daten[200321] = {"bydate":daten200321_begin,"bymeldung":daten200321_meldung,"labtested_n":16662,"symptoms":daten200321_symptoms,"deaths":47,"scaling":1600}
		
		daten200322_begin = {200301:106,200302:163,200303:157,200304:236,200305:219,200306:334,200307:445,200308:598,200309:754,200310:928,200311:1117,200312:1039,200313:997,200314:801,200315:678,200316:581,200317:307,200318:139,200319:51,200320:22,200321:3}
		daten200322_meldung = {200301:11,200302:14,200303:19,200304:40,200305:41,200306:54,200307:36,200308:20,200309:80,200310:158,200311:219,200312:320,200313:526,200314:512,200315:396,200316:760,200317:1234,200318:1325,200319:1145,200320:930,200321:424}
		daten200322_symptoms = {"symptoms_n":12951,"no_symtmom":811,"cough_symtom":7034}
		daten[200322] = {"bydate":daten200322_begin,"bymeldung":daten200322_meldung,"labtested_n":18610,"symptoms":daten200322_symptoms,"deaths":55,"scaling":1800}
		
		# 1st counting													 200301:118,200302:173,200303:169,200304:252,200305:243,200306:366,200307:493,200308:651,200309:831,
		# 2nd counting
		# 200224:41,200225:69,200226:113,200227:98,200228:126,200229:113,200301:120,200302:178,200303:170,200304:255,200305:242,200306:367,
		# 200227:12,200228:6,200229:7,200301:14,200302:8,200303:22,200304:40,200305:47,200306:57,
		
		daten200323_begin = {200224:41,200225:69,200226:113,200227:98,200228:126,200229:113,200301:119,200302:175,200303:169,200304:253,200305:243,200306:366,200307:493,200308:651,200309:831,200310:1044,200311:1264,200312:1199,200313:1218,200314:1089,200315:909,200316:825,200317:488,200318:307,200319:131,200320:40}
		daten200323_meldung = {200227:12,200228:6,200229:7,200301:13,200302:9,200303:20,200304:38,200305:45,200306:53,200307:31,200308:17,200309:89,200310:165,200311:207,200312:311,200313:497,200314:522,200315:406,200316:754,200317:1235,200318:1408,200319:1615,200320:1355,200321:1006,200322:302}
		daten200323_symptoms = {"symptoms_n":15859,"no_symtmom":604,"cough_symtom":8682,"hospitalized":1404}
		daten200323_origin = {"foreign":262+2781+6454,"domestic":529+2027+8184}
		daten[200323] = {"bydate":daten200323_begin,"bymeldung":daten200323_meldung,"labtested_n":22672,"symptoms":daten200323_symptoms,"deaths":86,"scaling":2000,"origin":daten200323_origin}
		
		daten200324_begin = {200304:267,200305:248,200306:396,200307:518,200308:687,200309:925,200310:1150,200311:1435,200312:1379,200313:1448,200314:1379,200315:1205,200316:1184,200317:793,200318:566,200319:299,200320:145,200321:48}
		daten200324_meldung = {200304:37,200305:51,200306:53,200307:34,200308:24,200309:87,200310:161,200311:201,200312:296,200313:486,200314:524,200315:404,200316:743,200317:1239,200318:1408,200319:1614,200320:1750,200321:1411,200322:1002,200323:573}
		daten200324_symptoms = {"symptoms_n":19285,"no_symtmom":604,"cough_symtom":10504,"hospitalized":1783,"pneumonia":336}
		daten[200324] = {"bydate":daten200324_begin,"bymeldung":daten200324_meldung,"labtested_n":27436,"symptoms":daten200324_symptoms,"deaths":114,"recovered":5600,"scaling":2500}
		
		daten200325_begin = {200303:180,200304:271,200305:256,200306:408,200307:548,200308:725,200309:994,200310:1245,200311:1562,200312:1537,200313:1684,200314:1635,200315:1440,200316:1549,200317:1095,200318:857,200319:492,200320:297,200321:152,200322:51,200323:28,200324:3}
		daten200325_meldung = {200303:15,200304:38,200305:43,200306:56,200307:28,200308:26,200309:86,200310:152,200311:193,200312:296,200313:476,200314:510,200315:386,200316:723,200317:1179,200318:1379,200319:1554,200320:1716,200321:1423,200322:1029,200323:1303,200324:770}
		daten200325_symptoms = {"symptoms_n":22581,"no_symtmom":757,"cough_symtom":12208,"hospitalized":2135,"pneumonia":336}
		daten[200325] = {"bydate":daten200325_begin,"bymeldung":daten200325_meldung,"labtested_n":31554,"symptoms":daten200325_symptoms,"deaths":149,"recovered":5600,"scaling":2500}
		
		# 1st counting																					200304:260,200305:260,200306:422,200307:552,200308:747,200309:1040
		# 2nd counting
		# 200224:34,200225:71,200226:110,200227:93,200228:118,200229:110,200301:121,200302:183,200303:186,200304:265,200305:265,200306:420,200307:561,200308:753,200309:1047,
		# 200224:14,200225:0,200226:0,200227:20,200228:17,200229:6,200301:17,200302:23,200303:14,200304:37,200305:37,200306:68,200307:29,200308:34,200309:87,
		
		daten200326_begin = {200224:34,200225:71,200226:110,200227:93,200228:118,200229:110,200301:121,200302:183,200303:186,200304:260,200305:260,200306:422,200307:552,200308:747,200309:1040,200310:1328,200311:1645,200312:1669,200313:1913,200314:1836,200315:1693,200316:1896,200317:1397, 200318:1141,200319:715,200320:540,200321:349,200322:240,200323:134,200324:28}
		daten200326_meldung = {200224:14,200225:0,200226:0,200227:20,200228:17,200229:6,200301:17,200302:23,200303:14,200304:36,200305:41,200306:65,200307:33,200308:41,200309:93,200310:154,200311:182,200312:288,200313:475,200314:507,200315:402,200316:715,200317:1161, 200318:1356,200319:1490,200320:1612,200321:1369,200322:970,200323:1344,200324:1828,200325:1068}
		daten200326_symptoms = {"symptoms_n":26250,"no_symtmom":870,"cough_symtom":14202,"hospitalized":2664,"pneumonia":429}
		daten[200326] = {"bydate":daten200326_begin,"bymeldung":daten200326_meldung,"labtested_n":36508,"symptoms":daten200326_symptoms,"deaths":198,"recovered":5900,"scaling":4000}
		
		daten200327_begin = {200304:284,200305:272,200306:446,200307:578,200308:799,200309:1101,200310:1414,200311:1756,200312:1767,200313:2102,200314:2051,200315:1911,200316:2231,200317:1730,200318:1469,200319:1027,200320:854,200321:608,200322:409,200323:331,200324:110,200325:48}
		daten200327_meldung = {200304:36,200305:52,200306:69,200307:26,200308:22,200309:92,200310:162,200311:199,200312:291,200313:479,200314:490,200315:394,200316:700,200317:1127,200318:1303,200319:1455,200320:1569,200321:1332,200322:931,200323:1344,200324:2051,200325:2261,200326:1160}
		daten200327_symptoms = {"symptoms_n":30393,"no_symtmom":957,"cough_symtom":16316,"hospitalized":3245,"pneumonia":519}
		daten[200327] = {"bydate":daten200327_begin,"bymeldung":daten200327_meldung,"labtested_n":42288,"symptoms":daten200327_symptoms,"deaths":253,"recovered":7600,"scaling":5000}
		
		daten200328_begin = {200304:285,200305:289,200306:473,200307:606,200308:822,200309:1152,200310:1478,200311:1864,200312:1928,200313:2282,200314:2268,200315:2153,200316:2599,200317:2062,200318:1823,200319:1410,200320:1263,200321:918,200322:643, 200323:611,200324:317,200325:179,200326:41}
		daten200328_meldung = {200304:41,200305:46,200306:60,200307:18,200308:14,200309:92,200310:161,200311:193,200312:290,200313:477,200314:473,200315:391,200316:698,200317:1097,200318:1276,200319:1478,200320:1588,200321:1318,200322:881, 200323:1271,200324:1887,200325:2342,200326:2507,200327:1180}
		daten200328_symptoms = {"symptoms_n":35011,"no_symtmom":1062,"cough_symtom":18768,"hospitalized":3906,"pneumonia":626}
		daten[200328] = {"bydate":daten200328_begin,"bymeldung":daten200328_meldung,"labtested_n":48582,"symptoms":daten200328_symptoms,"deaths":325,"recovered":9600,"scaling":5000}
		
		daten200329_begin = {200227:92,200228:121,200229:121,200301:121,200302:201,200303:207,200304:282,200305:282,200306:466,200307:593,200308:817,200309:1162,200310:1484,200311:1887,200312:1974,200313:2348,200314:2325,200315:2232,200316:2756,200317:2192,200318:1962, 200319:1542,200320:1467,200321:1082, 200322:800,200323:840,200324:483,200325:311,200326:115,200327:17,200328:6}
		daten200329_meldung = {200227:23,200228:11,200229:11,200301:6,200302:12,200303:6,200304:23,200305:34,200306:63,200307:34,200308:10,200309:87,200310:156,200311:202,200312:281,200313:466,200314:466,200315:397,200316:708,200317:1088,200318:1277, 200319:1467,200320:1577,200321:1323,200322:897,200323:1295, 200324:1865,200325:2330,200326:2514,200327:2227,200328:690}
		daten200329_symptoms = {"symptoms_n":37714,"no_symtmom":1115,"cough_symtom":20153,"hospitalized":4338,"pneumonia":685}
		daten[200329] = {"bydate":daten200329_begin,"bymeldung":daten200329_meldung,"labtested_n":52547,"symptoms":daten200329_symptoms,"deaths":389,"recovered":11500,"scaling":5000}
		
		daten200330_begin = {200227:107,200228:144,200229:136,200301:140,200302:221,200303:206,200304:298,200305:298,200306:485,200307:614,200308:838,200309:1180,200310:1522,200311:1911,200312:2029,200313:2433,200314:2437,200315:2334,200316:2925,200317:2370,200318:2154, 200319:1735,200320:1691,200321:1272, 200322:993,200323:1044,200324:677,200325:500,200326:247,200327:70,200328:22,200329:11}
		daten200330_meldung = {200228:18,200229:11,200301:18,200302:18,200303:30,200304:37,200305:37,200306:52,200307:22,200308:15,200309:88,200310:154,200311:202,200312:301,200313:463,200314:470,200315:382,200316:702,200317:1084,200318:1275, 200319:1455,200320:1569,200321:1323,200322:878,200323:1271, 200324:1837,200325:2282,200326:2550,200327:2778,200328:1918,200329:574}
		daten200330_symptoms = {"symptoms_n":40931,"cough_symtom":21716,"hospitalized":4904,"pneumonia":771}
		daten200330_origin = {"foreign":262+2781+6454+3814,"domestic":529+2027+8184+16532}
		daten[200330] = {"bydate":daten200330_begin,"bymeldung":daten200330_meldung,"labtested_n":57298,"symptoms":daten200330_symptoms,"deaths":455,"recovered":13500,"scaling":5000,"origin":daten200330_origin}
		
		# taken out 200227:116,
		daten200331_begin = {200228:135,200229:126,200301:137,200302:206,200303:210,200304:298,200305:310,200306:490,200307:628,200308:839,200309:1203,200310:1544,200311:1962,200312:2084,200313:2490,200314:2525,200315:2460,200316:3085,200317:2529,200318:2360, 200319:1916,200320:1939,200321:1483, 200322:1161,200323:1333,200324:881,200325:708,200326:436,200327:195,200328:65,200329:22,200330:7}
		daten200331_meldung = {200227:12,200228:13,200229:8,200301:8,200302:12,200303:4,200304:31,200305:30,200306:31,200307:19,200308:15,200309:80,200310:149,200311:191,200312:299,200313:468,200314:479,200315:387,200316:678,200317:1084,200318:1257, 200319:1444,200320:1582,200321:1314,200322:873,200323:1234, 200324:1805,200325:2235,200326:2449,200327:2844,200328:2360,200329:1430,200330:694}
		daten200331_symptoms = {"symptoms_n":44323,"cough_symtom":.53*44323,"hospitalized":5623,"pneumonia":867}
		daten[200331] = {"bydate":daten200331_begin,"bymeldung":daten200331_meldung,"labtested_n":61913,"symptoms":daten200331_symptoms,"deaths":583,"recovered":16100,"scaling":7000}
		
		daten200401_begin = {200226:123,200227:105,200228:132,200229:132,200301:140,200302:219,200303:211,200304:298,200305:307,200306:482,200307:640,200308:860,200309:1228,200310:1588,200311:2006,200312:2137,200313:2613,200314:2627,200315:2583,200316:3278}
		daten200401_meldung = {200227:123-105,200228:149-132,200229:149-132,200301:167-140,200302:237-219,200303:8,200304:44,200305:44,200306:60,200307:27,200308:26,200309:86,200310:1737-1588,200311:205,200312:300,200313:3073-2613,200314:3102-2627,200315:2971-2583,200316:3965-3278}
		daten200401_begin.update({200317:2730,200318:2591,200319:2130,200320:2269,200321:1765,200322:1363,200323:1648,200324:1158,200325:990,200326:675,200327:412,200328:230,200329:98,200330:39,200331:10})
		daten200401_meldung.update({200317:1133,200318:1301,200319:3563-2130,200320:3804-2269,200321:3044-1765,200322:2225-1363,200323:2868-1648,200324:2898-1158,200325:2242,200326:2325,200327:2690,200328:2171,200329:1440,200330:1726,200331:1216})
		daten200401_symptoms = {"symptoms_n":48767,"cough_symtom":.53*48767,"hospitalized":6382,"pneumonia":992}
		daten[200401] = {"bydate":daten200401_begin,"bymeldung":daten200401_meldung,"labtested_n":67366,"symptoms":daten200401_symptoms,"deaths":732,"recovered":18700,"scaling":7000}
		
		daten200402_begin = {200304:307,200305:327,200306:498,200307:654,200308:871,200309:1270,200310:1623,200311:2037,200312:2182,200313:2679,200314:2705,200315:2679,200316:3425,200317:2881,200318:2773,200319:2317,200320:2503,200321:1975,200322:1524, 200323:1913,200324:1421,200325:1250,200326:934,200327:675,200328:498,200329:317,200330:177,200331:53}
		daten200402_meldung = {200304:41,200305:31,200306:52,200307:26,200308:11,200309:83,200310:129,200311:207,200312:280,200313:456,200314:472,200315:384,200316:689,200317:1125,200318:1290,200319:1393,200320:1518,200321:1254,200322:850,200323:1207,200324:1756, 200325:2093,200326:2284,200327:2569,200328:2078,200329:1388,200330:1798,200331:2611,200401:1404}
		daten200402_symptoms = {"symptoms_n":53351,"cough_symtom":.53*53351,"hospitalized":7216,"pneumonia":1132}
		daten[200402] = {"bydate":daten200402_begin,"bymeldung":daten200402_meldung,"labtested_n":73522,"symptoms":daten200402_symptoms,"deaths":872,"recovered":21400,"scaling":7000}
	
	# 360k Tests in der Woche, ~8% positiv
		daten200403_begin = {200304:296,200305:313,200306:495,200307:665,200308:876,200309:1291,200310:1643,200311:2081,200312:2235,200313:2752,200314:2781,200315:2769,200316:3565,200317:2997,200318:2951,200319:2496,200320:2707,200321:2161,200322:1717,200323:2235, 200324:1655,200325:1530,200326:1211,200327:967,200328:773,200329:523,200330:455,200331:188,200401:45}
		daten200403_meldung = {200304:45,200305:40,200306:57,200307:23,200308:17,200309:85,200310:137,200311:188,200312:273,200313:455,200314:455,200315:347,200316:666,200317:1120,200318:1263,200319:1365,200320:1484,200321:1211,200322:819,200323:1165, 200324:1700,200325:2030,200326:2167,200327:2479,200328:1974,200329:1325,200330:1785,200331:2701,200401:2895,200402:1309}
		daten200403_symptoms = {"symptoms_n":58209,"cough_symtom":.53*58209,"hospitalized":8055,"pneumonia":1250}
		daten[200403] = {"bydate":daten200403_begin,"bymeldung":daten200403_meldung,"labtested_n":79696,"symptoms":daten200403_symptoms,"deaths":1017,"recovered":23800,"scaling":7000}
		
		daten200404_begin = {200306:494,200307:661,200308:880,200309:1310,200310:1663,200311:2106,200312:2273,200313:2787,200314:2832,200315:2819,200316:3654,200317:3094,200318:3068,200319:2618,200320:2886,200321:2318,200322:1858,200323:2463, 200324:1847,200325:1794,200326:1478,200327:1280,200328:1066,200329:782,200330:750,200331:408,200401:226,200402:76,200403:17}
		daten200404_meldung = {200306:58,200307:33,200308:26,200309:96,200310:154,200311:206,200312:283,200313:463,200314:450,200315:379,200316:671,200317:1108,200318:1257,200319:1349,200320:1439,200321:1194,200322:792,200323:1172, 200324:1649,200325:1926,200326:2098,200327:2414,200328:1916,200329:1279,200330:1718,200331:2547,200401:2799,200402:3013,200403:1263}
		daten200404_symptoms = {"symptoms_n":62969,"cough_symtom":.53*62969,"hospitalized":8803,"pneumonia":1376}
		daten[200404] = {"bydate":daten200404_begin,"bymeldung":daten200404_meldung,"labtested_n":85778,"symptoms":daten200404_symptoms,"deaths":1158,"recovered":26400,"scaling":7000}
		
		daten200405_begin = {200306:509,200307:669,200308:894,200309:1328,200310:1693,200311:2137,200312:2307,200313:2841,200314:2861,200315:2886,200316:3750,200317:3175,200318:3170,200319:2726,200320:3016,200321:2422,200322:1972,200323:2646,200324:1972, 200325:1972,200326:1723,200327:1538,200328:1338,200329:1004,200330:1039,200331:629,200401:424,200402:200,200403:40}
		daten200405_meldung = {200306:55,200307:30,200308:5,200309:95,200310:144,200311:200,200312:274,200313:444,200314:469,200315:369,200316:669,200317:1099,200318:1239,200319:1323,200320:1418,200321:1173,200322:774,200323:1164, 200324:1628,200325:1922,200326:2052,200327:2371,200328:1872,200329:1263,200330:1697,200331:2571,200401:2831,200402:3265,200403:2856,200404:1183}
		daten200405_symptoms = {"symptoms_n":67328,"cough_symtom":67328*.54,"hospitalized":9550,"pneumonia":1509}
		daten[200405] = {"bydate":daten200405_begin,"bymeldung":daten200405_meldung,"labtested_n":91714,"symptoms":daten200405_symptoms,"deaths":1342,"recovered":28700,"scaling":7000}
		
		# removed: 200228:172,200229:147,200301:177,200302:228,200303:228,200304:317,200305:334, / 200228:28,200229:17,200301:8,200302:17,200303:21,200304:42,200305:42,
		daten200406_begin = {200306:517,200307:682,200308:899,200309:1341,200310:1698,200311:2157,200312:2318,200313:2845,200314:2921,200315:2917, 200316:3797,200317:3214,200318:3219,200319:2773,200320:3121,200321:2492,200322:2055,200323:2777,200324:2072,200325:2093,200326:1821,200327:1651,200328:1481,200329:1111,200330:1226,200331:797,200401:614,200402:389,200403:147,200404:20}
		daten200406_meldung = {200306:55,200307:17,200308:17,200309:85,200310:157,200311:174,200312:285,200313:437,200314:434,200315:365, 200316:679,200317:1088,200318:1245,200319:1329,200320:1411,200321:1173,200322:760,200323:1143,200324:1576,200325:1857,200326:2035,200327:2341,200328:1831,200329:1233,200330:1674,200331:2528,200401:2770,200402:3170,200403:3250,200404:2137,200405:599}
		daten200406_symptoms = {"symptoms_n":70291,"cough_symtom":.52*70291,"hospitalized":10050,"pneumonia":1580}
		daten200406_origin = {"foreign":262+2781+6454+3814+1095,"domestic":529+2027+8184+16532+20780}
		daten[200406] = {"bydate":daten200406_begin,"bymeldung":daten200406_meldung,"labtested_n":95391,"symptoms":daten200406_symptoms,"deaths":1434,"recovered":30600,"scaling":7000,"origin":daten200406_origin}
		
		daten200407_begin = {200305:318,200306:506,200307:667,200308:886,200309:1340,200310:1710,200311:2147,200312:2335,200313:2862,200314:2929,200315:2950,200316:3873, 200317:3263,200318:3289,200319:2841,200320:3211,200321:2559,200322:2106,200323:2893,200324:2163,200325:2220,200326:1934,200327:1819,200328:1647,200329:1261,200330:1459,200331:1027,200401:865,200402:610,200403:308,200404:73,200405:21}
		daten200407_meldung = {200305:52,200306:67,200307:37,200308:21,200309:88,200310:146,200311:198,200312:276,200313:448,200314:449,200315:375,200316:656,200317:1094,200318:1230,200319:1313,200320:1402,200321:1163,200322:766,200323:1120,200324:1574,200325:1846,200326:1996,200327:2299,200328:1783,200329:1210,200330:1621,200331:2465,200401:2685,200402:3018,200403:3142,200404:2200,200405:1251,200406:891}
		daten200407_symptoms = {"symptoms_n":73780,"cough_symtom":.52*73780,"hospitalized":10726,"pneumonia":1673}
		daten[200407] = {"bydate":daten200407_begin,"bymeldung":daten200407_meldung,"labtested_n":99225,"symptoms":daten200407_symptoms,"deaths":1607,"recovered":33300,"scaling":7000,"R_est":(1.3,1.0,1.6)}
		
		daten200408_begin = {200306:521,200307:680,200308:908,200309:1364,200310:1726,200311:2178,200312:2366,200313:2892,200314:2957,200315:3006,200316:3944,200317:3319,200318:3329,200319:2872,200320:3279,200321:2644,200322:2193,200323:2996, 200324:2262,200325:2347,200326:2054,200327:1960,200328:1831,200329:1409,200330:1721,200331:1225,200401:1151,200402:898,200403:575,200404:258,200405:124,200406:55}
		daten200408_meldung = {200306:54,200307:29,200308:15,200309:90,200310:139,200311:193,200312:273,200313:437,200314:436,200315:367,200316:650,200317:1091,200318:1240,200319:1325,200320:1379,200321:1151,200322:734,200323:1102,200324:1538,200325:1835,200326:1969,200327:2257,200328:1751,200329:1181,200330:1618,200331:2426,200401:2590,200402:2838,200403:2942,200404:1960,200405:1196,200406:1731,200407:1151}
		daten200408_symptoms = {"symptoms_n":77538,"cough_symtom":.52*77538,"hospitalized":11477,"pneumonia":1779,"ICU":{"current":1854,"finished":1566,"ventilated":1492,"deaths":486,"beds":14255,"beds_available":6037,"clinics":588}}
		daten[200408] = {"bydate":daten200408_begin,"bymeldung":daten200408_meldung,"labtested_n":103228,"symptoms":daten200408_symptoms,"deaths":1861,"recovered":46300,"scaling":7000,"R_est":(1.2,0.9,1.6)}
		
		daten200409_begin = {200304:330,200305:335,200306:522,200307:680,200308:906,200309:1374,200310:1724,200311:2182,200312:2369,200313:2931,200314:2980,200315:3034,200316:3980,200317:3350,200318:3414,200319:2941,200320:3365,200321:2729,200322:2241,200323:3113, 200324:2360,200325:2478,200326:2167,200327:2133,200328:2005,200329:1562,200330:1975,200331:1433,200401:1419,200402:1182,200403:892,200404:512,200405:325,200406:271,200407:59,200408:7}
		daten200409_meldung = {200304:25,200305:44,200306:64,200307:20,200308:15,200309:84,200310:148,200311:192,200312:281,200313:429,200314:444,200315:370,200316:660,200317:1079,200318:1212,200319:1305,200320:1364,200321:1128,200322:725,200323:1089, 200324:1512,200325:1793,200326:1917,200327:2212,200328:1685,200329:1142,200330:1552,200331:2311,200401:2497,200402:2749,200403:2862,200404:1808,200405:1148,200406:1704,200407:2301,200408:1079}
		daten200409_symptoms = {"symptoms_n":82187,"cough_symtom":.52*82187,"hospitalized":12268,"pneumonia":1880,"ICU":{"current":1888,"finished":1939,"ventilated":1464,"deaths":579,"beds":16734,"beds_available":7039,"clinics":680}}
		daten[200409] = {"bydate":daten200409_begin,"bymeldung":daten200409_meldung,"labtested_n":108202,"symptoms":daten200409_symptoms,"deaths":2107,"recovered":49900,"scaling":7000,"R_est":(1.1,0.9,1.4)}
		
		daten200410_begin = {200304:327,200305:346,200306:530,200307:700,200308:909,200309:1382,200310:1737,200311:2215,200312:2395,200313:2958,200314:3015,200315:3091,200316:4047,200317:3422,200318:3469,200319:3010,200320:3446,200321:2788,200322:2291,200323:3233, 200324:2433,200325:2589,200326:2281,200327:2262,200328:2139,200329:1671,200330:2196,200331:1609,200401:1666,200402:1439,200403:1245,200404:828,200405:634,200406:563,200407:218,200408:76}
		daten200410_meldung = {200304:33,200305:37,200306:57,200307:15,200308:14,200309:99,200310:137,200311:189,200312:279,200313:426,200314:440,200315:364,200316:624,200317:1070,200318:1217,200319:1278,200320:1363,200321:1117,200322:719,200323:1088, 200324:1486,200325:1756,200326:1865,200327:2173,200328:1657,200329:1117,200330:1529,200331:2244,200401:2385,200402:2622,200403:2806,200404:1733,200405:1060,200406:1666,200407:2276,200408:2527,200409:1174}
		daten200410_symptoms = {"symptoms_n":86721,"cough_symtom":.52*86721,"hospitalized":13057,"pneumonia":2032,"ICU":{"current":2204,"finished":2475,"ventilated":1810,"deaths":733,"beds":18669,"beds_available":7609,"clinics":754}}
		daten[200410] = {"bydate":daten200410_begin,"bymeldung":daten200410_meldung,"labtested_n":113525,"symptoms":daten200410_symptoms,"deaths":2373,"recovered":53913,"scaling":7000,"R_est":(1.1,0.9,1.4)}
		
	# No updated clinic - report for that day
		daten200411_begin = {200304:314,200305:336,200306:521,200307:689,200308:908,200309:1384,200310:1760,200311:2225,200312:2410,200313:2970,200314:3015,200315:3094,200316:4058,200317:3441,200318:3492,200319:3015,200320:3480,200321:2825,200322:2303,200323:3279, 200324:2472,200325:2629,200326:2326,200327:2326,200328:2197,200329:1715,200330:2287,200331:1681,200401:1821,200402:1597,200403:1463,200404:1009,200405:829,200406:813,200407:448,200408:213,200409:45}
		daten200411_meldung = {200304:39,200305:45,200306:73,200307:17,200308:11,200309:96,200310:123,200311:196,200312:275,200313:426,200314:449,200315:353,200316:644,200317:1065,200318:1205,200319:1278,200320:1323,200321:1104,200322:707,200323:1081, 200324:1468,200325:1742,200326:1833,200327:2141,200328:1636,200329:1104,200330:1513,200331:2225,200401:2354,200402:2595,200403:2763,200404:1692,200405:1043,200406:1614,200407:2136,200408:2567,200409:2382,200410:841}
		daten200411_symptoms = {"symptoms_n":90025,"cough_symtom":.51*90025,"hospitalized":13661,"pneumonia":2113,"ICU":{"current":2204,"finished":2475,"ventilated":1810,"deaths":733,"beds":16738,"beds_available":7091,"clinics":754}}
		daten[200411] = {"bydate":daten200411_begin,"bymeldung":daten200411_meldung,"labtested_n":117658,"symptoms":daten200411_symptoms,"deaths":2544,"recovered":57400,"scaling":7000,"R_est":(1.3,1.1,1.7)}
		
		daten200412_begin = {200224:49,200225:85,200226:126,200227:134,200228:171,200229:154,200301:162,200302:248,200303:232,200304:321,200305:337,200306:524,200307:695,200308:906,200309:1385,200310:1751,200311:2226,200312:2409,200313:2981,200314:3042,200315:3111,200316:4090,200317:3465,200318:3526,200319:3046,200320:3505,200321:2855,200322:2327,200323:3318,200324:2498,200325:2669,200326:2364,200327:2376,200328:2234,200329:1755,200330:2372,200331:1755,200401:1901,200402:1698,200403:1596,200404:1125,200405:942,200406:971,200407:597,200408:378,200409:219,200410:28}
		daten200412_meldung = {200224:8,200225:0,200226:0,200227:16,200228:16,200229:13,200301:21,200302:8,200303:12,200304:28,200305:45,200306:57,200307:16,200308:20,200309:98,200310:146,200311:199,200312:284,200313:435,200314:443,200315:354,200316:642,200317:1072,200318:1198,200319:1272,200320:1337,200321:1093,200322:723,200323:1065,200324:1462,200325:1734,200326:1828,200327:2128,200328:1629,200329:1064,200330:1487,200331:2177,200401:2319,200402:2587,200403:2783,200404:1678,200405:1044,200406:1645,200407:2149,200408:2522,200409:2454,200410:1455,200411:536}
		daten200412_symptoms = {"symptoms_n":92361,"cough_symtom":.51*92361,"hospitalized":14129,"pneumonia":2180,"ICU":{"current":2205,"finished":2978,"ventilated":1859,"deaths":864,"beds":19701,"beds_available":8325,"clinics":752}}
		daten[200412] = {"bydate":daten200412_begin,"bymeldung":daten200412_meldung,"labtested_n":120479,"symptoms":daten200412_symptoms,"deaths":2673,"recovered":60300,"scaling":5000,"R_est":(1.3,1.,1.6)}

#		daten200413_begin = {200304:332,200305:346,200306:527,200307:702,200308:902,200309:1386,200310:1751,200311:2235,200312:2420,200313:2995,200314:3056,200315:3113,200316:4119,200317:3479,200318:3540,200319:3056,200320:3531,200321:2862,200322:2354,200323:3346,200324:2511,200325:2696,200326:2406,200327:2397,200328:2278,200329:1794,200330:2435,200331:1813,200401:1988,200402:1780,200403:1727,200404:1205,200405:1082,200406:1139,200407:764,200408:551,200409:318,200410:66,200411:19}
#		daten200413_meldung = {200304:24,200305:29,200306:61,200307:15,200308:23,200309:90,200310:143,200311:195,200312:271,200313:427,200314:427,200315:356,200316:622,200317:1067,200318:1206,200319:1277,200320:1324,200321:1096,200322:702,200323:1087,200324:1461,200325:1722,200326:1803,200327:2121,200328:1599,200329:1049,200330:1485,200331:2150,200401:2297,200402:2586,200403:2739,200404:1642,200405:1025,200406:1590,200407:2098,200408:2415,200409:2411,200410:1609,200411:1286,200412:390}
		daten200413_begin = {200216: 7, 200217: 10, 200218: 6, 200219: 9, 200220: 30, 200221: 21, 200222: 26, 200223: 40, 200224: 60, 200225: 96, 200226: 137, 200227: 148, 200228: 187, 200229: 163, 200301: 179, 200302: 253, 200303: 234, 200304: 325, 200305: 339, 200306: 531, 200307: 700, 200308: 915, 200309: 1386, 200310: 1750, 200311: 2218, 200312: 2400, 200313: 2974, 200314: 3035, 200315: 3107, 200316: 4090, 200317: 3436, 200318: 3512, 200319: 3029, 200320: 3494, 200321: 2855, 200322: 2338, 200323: 3329, 200324: 2484, 200325: 2654, 200326: 2358, 200327: 2346, 200328: 2226, 200329: 1777, 200330: 2399, 200331: 1759, 200401: 1924, 200402: 1708, 200403: 1654, 200404: 1168, 200405: 1055, 200406: 1113, 200407: 709, 200408: 506, 200409: 304, 200410: 57, 200411: 4, 200412: 3}
		daten200413_meldung = {200216: 0, 200217: 0, 200218: 0, 200219: 0, 200220: 0, 200221: 0, 200222: 1, 200223: 8, 200224: 1, 200225: 1, 200226: 1, 200227: 4, 200228: 11, 200229: 4, 200301: 11, 200302: 8, 200303: 23, 200304: 43, 200305: 49, 200306: 65, 200307: 25, 200308: 23, 200309: 104, 200310: 153, 200311: 216, 200312: 301, 200313: 457, 200314: 461, 200315: 371, 200316: 662, 200317: 1116, 200318: 1232, 200319: 1314, 200320: 1365, 200321: 1112, 200322: 729, 200323: 1101, 200324: 1490, 200325: 1760, 200326: 1855, 200327: 2178, 200328: 1657, 200329: 1084, 200330: 1524, 200331: 2207, 200401: 2370, 200402: 2658, 200403: 2814, 200404: 1688, 200405: 1053, 200406: 1630, 200407: 2154, 200408: 2456, 200409: 2434, 200410: 1623, 200411: 1309, 200412: 401}
		daten200413_origin = {"foreign":262+2781+6454+3814+1095+267,"domestic":529+2027+8184+16532+20780+16861}
		daten200413_symptoms = {"symptoms_n":94574,"cough_symtom":94574*.51,"hospitalized":14554,"pneumonia":2242,"ICU":{"current":2447,"finished":3253,"ventilated":1841,"deaths":952,"beds":19820,"beds_available":8307,"clinics":766}}
		daten[200413] = {"bydate":daten200413_begin,"bymeldung":daten200413_meldung,"labtested_n":123016,"symptoms":daten200413_symptoms,"deaths":2799,"recovered":64300,"scaling":7000,"R_est":(1.2,1.,1.6),"origin":daten200413_origin}

#		daten200414_begin = {200304:329,200305:344,200306:531,200307:697,200308:919,200309:1390,200310:1774,200311:2237,200312:2423,200313:3009,200314:3061,200315:3112,200316:4118,200317:3496,200318:3555,200319:3076,200320:3544,200321:2878,200322:2352,200323:3369,200324:2526,200325:2720,200326:2407,200327:2419,200328:2292,200329:1805,200330:2475,200331:1833,200401:2039,200402:1841,200403:1782,200404:1283,200405:1152,200406:1259,200407:907,200408:685,200409:463,200410:146,200411:71}
#		daten200414_meldung = {200304:27,200305:40,200306:59,200307:24,200308:11,200309:91,200310:122,200311:198,200312:277,200313:428,200314:427,200315:364,200316:637,200317:1065,200318:1184,200319:1271,200320:1326,200321:1089,200322:712,200323:1073,200324:1457,200325:1710,200326:1802,200327:2114,200328:1592,200329:1069,200330:1488,200331:2150,200401:2296,200402:2562,200403:2728,200404:1631,200405:1018,200406:1576,200407:2070,200408:2379,200409:2332,200410:1564,200411:1469,200412:919,200413:360}
		daten200414_begin = {200216: 7, 200217: 10, 200218: 6, 200219: 9, 200220: 31, 200221: 21, 200222: 26, 200223: 44, 200224: 60, 200225: 97, 200226: 138, 200227: 148, 200228: 187, 200229: 163, 200301: 179, 200302: 253, 200303: 235, 200304: 326, 200305: 340, 200306: 527, 200307: 700, 200308: 916, 200309: 1387, 200310: 1756, 200311: 2221, 200312: 2405, 200313: 2981, 200314: 3037, 200315: 3112, 200316: 4097, 200317: 3446, 200318: 3521, 200319: 3038, 200320: 3511, 200321: 2868, 200322: 2343, 200323: 3348, 200324: 2502, 200325: 2679, 200326: 2369, 200327: 2367, 200328: 2244, 200329: 1798, 200330: 2441, 200331: 1785, 200401: 1980, 200402: 1760, 200403: 1713, 200404: 1241, 200405: 1136, 200406: 1223, 200407: 855, 200408: 634, 200409: 430, 200410: 119, 200411: 53, 200412: 9, 200413: 9}
		daten200414_meldung = {200216: 0, 200217: 0, 200218: 0, 200219: 0, 200220: 0, 200221: 0, 200222: 1, 200223: 8, 200224: 1, 200225: 1, 200226: 1, 200227: 4, 200228: 11, 200229: 4, 200301: 11, 200302: 8, 200303: 23, 200304: 43, 200305: 49, 200306: 65, 200307: 25, 200308: 23, 200309: 103, 200310: 153, 200311: 216, 200312: 301, 200313: 457, 200314: 461, 200315: 369, 200316: 662, 200317: 1115, 200318: 1231, 200319: 1315, 200320: 1365, 200321: 1110, 200322: 727, 200323: 1100, 200324: 1488, 200325: 1756, 200326: 1847, 200327: 2167, 200328: 1645, 200329: 1077, 200330: 1522, 200331: 2198, 200401: 2365, 200402: 2651, 200403: 2798, 200404: 1684, 200405: 1043, 200406: 1623, 200407: 2129, 200408: 2423, 200409: 2368, 200410: 1599, 200411: 1496, 200412: 916, 200413: 378}
		daten200414_symptoms = {"symptoms_n":96303,"cough_symtom":.51*96303,"hospitalized":14969,"pneumonia":2559,"ICU":{"current":2488,"finished":3456,"ventilated":1848,"deaths":1018,"beds":20595,"beds_available":8597,"clinics":789}}
		daten[200414] = {"bydate":daten200414_begin,"bymeldung":daten200414_meldung,"labtested_n":125098,"symptoms":daten200414_symptoms,"deaths":2969,"recovered":68100,"scaling":7000,"R_est":(1,0.8,1.2)}

		daten200415_begin = {200304:327,200305:340,200306:528,200307:696,200308:922,200309:1400,200310:1777,200311:2251,200312:2444,200313:3022,200314:3072,200315:3123,200316:4166,200317:3521,200318:3584,200319:3085,200320:3567,200321:2905,200322:2381,200323:3404,200324:2549,200325:2746,200326:2448,200327:2444,200328:2331,200329:1844,200330:2536,200331:1886,200401:2121,200402:1916,200403:1869,200404:1375,200405:1228,200406:1408,200407:1073,200408:830,200409:620,200410:281,200411:184,200412:63,200413:25}
		daten200415_meldung = {200304:42,200305:37,200306:59,200307:25,200308:21,200309:92,200310:143,200311:189,200312:272,200313:424,200314:432,200315:369,200316:629,200317:1052,200318:1186,200319:1262,200320:1316,200321:1081,200322:704,200323:1047,200324:1437,200325:1685,200326:1744,200327:2100,200328:1584,200329:1048,200330:1459,200331:2113,200401:2284,200402:2531,200403:2712,200404:1630,200405:1015,200406:1539,200407:2012,200408:2280,200409:2272,200410:1521,200411:1480,200412:951,200413:826,200414:549}
		daten200415_symptoms = {"symptoms_n":104218,"cough_symtom":.51*104218,"hospitalized":15613,"pneumonia":2416,"ICU":{"current":2679,"finished":4017,"ventilated":1996,"deaths":1246,"new":191,"new_ventiated":148,"beds":23763,"beds_available":9902,"clinics":941}}
		daten[200415] = {"bydate":daten200415_begin,"bymeldung":daten200415_meldung,"labtested_n":127584,"symptoms":daten200415_symptoms,"deaths":3254,"recovered":72600,"scaling":7000,"R_est":(0.9,.8,1.1)}
		
		daten200416_begin = {200303:228,200304:328,200305:352,200306:536,200307:704,200308:925,200309:1414,200310:1789,200311:2255,200312:2463,200313:3033,200314:3086,200315:3150,200316:4195,200317:3539,200318:3616,200319:3126,200320:3619,200321:2929,200322:2413,200323:3445,200324:2584,200325:2801,200326:2480,200327:2493,200328:2386,200329:1870,200330:2620,200331:1930,200401:2208,200402:1984,200403:2011,200404:1494,200405:1347,200406:1572,200407:1257,200408:1039,200409:808,200410:456,200411:332,200412:184,200413:84,200414:44}
		daten200416_meldung = {200303:33,200304:31,200305:30,200306:60,200307:20,200308:17,200309:87,200310:138,200311:191,200312:271,200313:418,200314:439,200315:358,200316:634,200317:1058,200318:1172,200319:1250,200320:1300,200321:1075,200322:683,200323:1052,200324:1414,200325:1652,200326:1712,200327:2064,200328:1575,200329:1042,200330:1441,200331:2091,200401:2259,200402:2513,200403:2663,200404:1602,200405:995,200406:1507,200407:1963,200408:2191,200409:2127,200410:1397,200411:1441,200412:902,200413:784,200414:1095,200415:730}
		daten200416_symptoms = {"symptoms_n":101538,"cough_symtom":.51*101538,"hospitalized":16318,"pneumonia":2509,"ICU":{"current":2773,"finished":4861,"ventilated":2083,"deaths":1501,"beds":26628,"beds_available":11312,"clinics":1067} }
		daten[200416] = {"bydate":daten200416_begin,"bymeldung":daten200416_meldung,"labtested_n":130450,"symptoms":daten200416_symptoms,"deaths":3569,"recovered":77000,"scaling":7000,"R_est":(0.7,0.4,0.8)}
		
		daten200417_begin = {200304:329,200305:341,200306:544,200307:706,200308:934,200309:1417,200310:1811,200311:2278,200312:2481,200313:3070,200314:3106,200315:3179,200316:4239,200317:3569,200318:3650,200319:3167,200320:3650,200321:2956,200322:2436,200323:3496,200324:2619,200325:2842,200326:2509,200327:2538,200328:2424,200329:1912,200330:2668,200331:1994,200401:2282,200402:2059,200403:2107,200404:1575,200405:1413,200406:1665,200407:1401,200408:1202,200409:983,200410:650,200411:503,200412:365,200413:256,200414:162,200415:45}
		daten200417_meldung = {200304:36,200305:33,200306:45,200307:17,200308:28,200309:89,200310:134,200311:203,200312:280,200313:422,200314:426,200315:349,200316:621,200317:1056,200318:1157,200319:1234,200320:1300,200321:1068,200322:674,200323:1035,200324:1393,200325:1624,200326:1693,200327:2034,200328:1551,200329:1020,200330:1437,200331:2046,200401:2245,200402:2476,200403:2635,200404:1551,200405:970,200406:1498,200407:1920,200408:2136,200409:2107,200410:1335,200411:1426,200412:894,200413:751,200414:1109,200415:1551,200416:654}
		daten200417_symptoms = {"symptoms_n":104719,"cough_symtom":.51*104719,"hospitalized":16963,"pneumonia":2642,"ICU":{"current":2868,"finished":6030,"ventilated":2145,"deaths":1806,"beds":29011,"beds_available":11901,"clinics":1138}}
		daten[200417] = {"bydate":daten200417_begin,"bymeldung":daten200417_meldung,"labtested_n":133830,"symptoms":daten200417_symptoms,"deaths":3868,"recovered":81800,"scaling":7000,"R_est":(0.7,0.6,0.8)}
		
		daten200418_begin = {200303:238,200304:326,200305:342,200306:540,200307:709,200308:930,200309:1430,200310:1820,200311:2276,200312:2501,200313:3073,200314:3121,200315:3198,200316:4265,200317:3597,200318:3673,200319:3178,200320:3661,200321:2993,200322:2457,200323:3516,200324:2630,200325:2868,200326:2533,200327:2574,200328:2441,200329:1949,200330:2719,200331:2014,200401:2344,200402:2135,200403:2159,200404:1623,200405:1466,200406:1780,200407:1502,200408:1349,200409:1164,200410:810,200411:685,200412:528,200413:407,200414:371,200415:161,200416:48}
		daten200418_meldung = {200303:28,200304:45,200305:53,200306:60,200307:20,200308:21,200309:84,200310:141,200311:197,200312:270,200313:435,200314:431,200315:354,200316:616,200317:1039,200318:1172,200319:1236,200320:1293,200321:1055,200322:660,200323:1043,200324:1390,200325:1607,200326:1684,200327:2026,200328:1530,200329:1003,200330:1409,200331:2022,200401:2195,200402:2432,200403:2594,200404:1543,200405:975,200406:1486,200407:1905,200408:2123,200409:2058,200410:1333,200411:1381,200412:829,200413:729,200414:1087,200415:1523,200416:1599,200417:709}
		daten200418_symptoms = {"symptoms_n":107703,"cough_symtom":.51*107703,"hospitalized":17623,"pneumonia":2764,"ICU":{"current":2922,"finished":6365,"ventilated":2180,"deaths":1929,"beds":30077,"beds_available":12336,"clinics":1189}}
		daten[200418] = {"bydate":daten200418_begin,"bymeldung":daten200418_meldung,"labtested_n":137439,"symptoms":daten200418_symptoms,"deaths":4110,"recovered":85400,"scaling":7000,"R_est":(0.8,.7,1.)}

		daten200419_begin = {200304:330,200305:342,200306:537,200307:708,200308:931,200309:1429,200310:1820,200311:2278,200312:2513,200313:3090,200314:3138,200315:3218,200316:4289,200317:3608,200318:3688,200319:3194,200320:3688,200321:3006,200322:2477,200323:3548,200324:2632,200325:2875,200326:2564,200327:2604,200328:2453,200329:1963,200330:2748,200331:2043,200401:2369,200402:2174,200403:2198,200404:1648,200405:1489,200406:1859,200407:1573,200408:1417,200409:1246,200410:935,200411:772,200412:661,200413:537,200414:489,200415:294,200416:135,200417:23}
		daten200419_meldung = {200304:36,200305:52,200306:64,200307:24,200308:28,200309:88,200310:139,200311:195,200312:270,200313:430,200314:430,200315:354,200316:625,200317:1047,200318:1171,200319:1230,200320:1290,200321:1056,200322:657,200323:1020,200324:1382,200325:1609,200326:1669,200327:1996,200328:1521,200329:992,200330:1390,200331:2023,200401:2167,200402:2430,200403:2589,200404:1526,200405:980,200406:1470,200407:1880,200408:2107,200409:2031,200410:1299,200411:1374,200412:824,200413:729,200414:1052,200415:1466,200416:1513,200417:1510,200418:506}
		daten200419_symptoms = {"symptoms_n":109744,"cough_symtom":.51*109744,"hospitalized":18051,"pneumonia":2835,"ICU":{"current":2889,"finished":6619,"ventilated":2113,"deaths":1979,"beds":30058,"beds_available":12665,"clinics":1174}}
		daten[200419] = {"bydate":daten200419_begin,"bymeldung":daten200419_meldung,"labtested_n":139897,"symptoms":daten200419_symptoms,"deaths":4294,"recovered":88000,"scaling":7000,"R_est":(0.8,0.7,1.)}
		
		from_dashboard = True
		if from_dashboard:	# as indicated by tooltip on RKI-Dashboard
			daten200420_begin = {200302:261,200303:243,200304:335,200305:349,200306:543,200307:715,200308:944,200309:1422,200310:1820,200311:2268,200312:2493,200313:3071,200314:3116,200315:3212,200316:4271,200317:3569,200318:3666,200319:3163,200320:3666,200321:2997,200322:2462,200323:3528,200324:2615,200325:2844,200326:2526,200327:2557,200328:2425,200329:1951,200330:2724,200331:2003,200401:2324,200402:2108,200403:2130,200404:1629,200405:1494,200406:1857,200407:1529,200408:1378,200409:1240,200410:951,200411:806,200412:724,200413:605,200414:567,200415:372,200416:209,200417:90,200418:19,200419:15}
			daten200420_meldung = {200302:8,200303:24,200304:43,200305:49,200306:64,200307:25,200308:23,200309:102,200310:157,200311:214,200312:294,200313:456,200314:454,200315:366,200316:654,200317:1084,200318:1190,200319:1279,200320:1322,200321:1075,200322:683,200323:1062,200324:1412,200325:1657,200326:1719,200327:2035,200328:1558,200329:1012,200330:1263,200331:1966,200401:2228,200402:2496,200403:2660,200404:1570,200405:996,200406:1517,200407:1952,200408:2167,200409:2083,200410:1364,200411:1403,200412:830,200413:734,200414:1059,200415:1489,200416:1557,200417:1616,200418:987,200419:439}
		else: # as counted from daily situation report
			daten200420_begin = {200304:333,200305:360,200306:542,200307:711,200308:942,200309:1435,200310:1839,200311:2283,200312:2518,200313:3109,200314:3140,200315:3225,200316:4304,200317:3620,200318:3709,200319:3207,200320:3704,200321:3016,200322:2478,200323:3553,200324:2647,200325:2896,200326:2567,200327:2621,200328:2474,200329:1963,200330:2763,200331:2056,200401:2398,200402:2203,200403:2216,200404:1683,200405:1519,200406:1901,200407:1599,200408:1457,200409:1288,200410:1004,200411:844,200412:737,200413:626,200414:586,200415:400,200416:244,200417:111,200418:22}
			daten200420_meldung = {200304:36,200305:35,200306:62,200307:17,200308:17,200309:84,200310:142,200311:191,200312:271,200313:413,200314:436,200315:346,200316:626,200317:1035,200318:1155,200319:1239,200320:1280,200321:1048,200322:658,200323:1031,200324:1377,200325:1594,200326:1688,200327:1976,200328:1501,200329:995,200330:1306,200331:1959,200401:2155,200402:2399,200403:2568,200404:1511,200405:964,200406:1475,200407:1879,200408:2087,200409:2034,200410:1310,200411:1350,200412:809,200413:715,200414:1044,200415:1461,200416:1528,200417:1595,200418:991,200419:435}
		daten200420_origin = {"foreign":262+2781+6454+3814+1095+267+113,"domestic":529+2027+8184+16532+20780+16861+10493}
		daten200420_symptoms = {"symptoms_n":111273,"cough_symtom":.5*111273,"hospitalized":18361,"pneumonia":2884,"ICU":{"current":2793,"finished":6785,"ventilated":2009,"deaths":2038,"beds":29215,"beds_available":12260,"clinics":1159}}
		daten[200420] = {"bydate":daten200420_begin,"bymeldung":daten200420_meldung,"labtested_n":141672,"symptoms":daten200420_symptoms,"deaths":4404,"recovered":91500,"scaling":5500,"R_est":(0.9,.8,1.1),"origin":daten200420_origin}
		
		if from_dashboard:	# as indicated by tooltip on RKI-Dashboard
			daten200421_begin = {200321:3004,200322:2456,200323:3556,200324:2632,200325:2859,200326:2533,200327:2571,200328:2440,200329:1974,200330:2750,200331:2022,200401:2347,200402:2125,200403:2159,200404:1670,200405:1512,200406:1892,200407:1568,200408:1429,200409:1311,200410:1010,200411:873,200412:813,200413:707,200414:669,200415:501,200416:328,200417:167,200418:63,200419:19,200420:15}
			daten200421_meldung = {200330:1340,200331:2007,200401:2203,200402:2476,200403:2631,200404:1557,200405:982,200406:1511,200407:1929,200408:2151,200409:2069,200410:1361,200411:1397,200412:822,200413:734,200414:1044,200415:1434,200416:1506,200417:1608,200418:1025,200419:764,200420:399}
		else:	# as counted from daily situation report
			daten200421_begin = {200409:1361,200410:1061,200411:909,200412:814,200413:726,200414:690,200415:535,200416:355,200417:185,200418:72,200419:23,200420:2}
			daten200421_meldung={200409:2027,200410:1310,200411:1356,200412:812,200413:713,200414:1024,200415:1402,200416:1476,200417:1596,200418:1028,200419:763,200420:395}
		
		daten200421_symptoms = {"symptoms_n":113051,"cough_symtom":.5*113051,"hospitalized":18766,"pneumonia":2940,"ICU":{"current":2908,"finished":7037,"ventilated":2112,"deaths":2146,"beds":31244,"beds_available":12623,"clinics":1222}}
		daten[200421] = {"bydate":daten200421_begin,"bymeldung":daten200421_meldung,"labtested_n":143457,"symptoms":daten200421_symptoms,"deaths":4598,"recovered":95200,"scaling":6000,"R_est":(.9,.8,1.1)}

		if from_dashboard:
			daten200422_begin = {200401:2378,200402:2156,200403:2184,200404:1706,200405:1541,200406:1956,200407:1614,200408:1483,200409:1365,200410:1084,200411:942,200412:890,200413:811,200414:784,200415:625,200416:477,200417:287,200418:182,200419:85,200420:39,200421:17}
			daten200422_meldung={200401:2173,200402:2441,200403:2608,200404:1536,200405:978,200406:1485,200407:1908,200408:2127,200409:2026,200410:1339,200411:1389,200412:812,200413:734,200414:1031,200415:1398,200416:1470,200417:1533,200418:984,200419:729,200420:886,200421:547}
		else:
			daten200422_begin = {}
			daten200422_meldung={}
		
		daten200422_symptoms = {"symptoms_n":115384,"cough_symtom":.5*115384,"hospitalized":19335,"pneumonia":3028,"ICU":{"current":2799,"finished":7453,"ventilated":2046,"deaths":2237,"beds":31885,"beds_available":12686,"clinics":1230}}
		daten[200422] = {"bydate":daten200422_begin,"bymeldung":daten200422_meldung,"labtested_n":145694,"recovered":99500,"symptoms":daten200422_symptoms,"deaths":4879,"scaling":6000,"R_est":(1,0.7,1.1)}
		
		if from_dashboard:
			daten200423_begin = {200401:2416,200402:2195,200403:2218,200404:1737,200405:1552,200406:1988,200407:1662,200408:1524,200409:1410,200410:1134,200411:983,200412:940,200413:872,200414:869,200415:743,200416:588,200417:430,200418:323,200419:193,200420:150,200421:40,200422:27}
			daten200423_meldung = {200401:2114,200402:2384,200403:2570,200404:1513,200405:974,200406:1469,200407:1885,200408:2108,200409:1995,200410:1324,200411:1366,200412:794,200413:722,200414:1013,200415:1379,200416:1439,200417:1495,200418:934,200419:692,200420:920,200421:1002,200422:742}
		else:
			daten200423_begin = {}
			daten200423_meldung = {}
		daten200423_symptoms = {"symptoms_n":117619,"cough_symtom":.5*117619,"hospitalized":19835,"pneumonia":3112,"ICU":{"current":2776,"finished":7900,"ventilated":2045,"deaths":2352,"beds":33716,"beds_available":14304,"clinics":1241}}
		daten[200423] = {"bydate":daten200423_begin,"bymeldung":daten200423_meldung,"labtested_n":148046,"deaths":5094,"recovered":103300,"scaling":6000,"R_est":(.9,.7,1),"symptoms":daten200423_symptoms}
		
		
		daten200424_begin = {200305:353,200306:557,200307:726,200308:961,200309:1449,200310:1856,200311:2313,200312:2539,200313:3123,200314:3170,200315:3263,200316:4367,200317:3634,200318:3756,200319:3233,200320:3757,200321:3077,200322:2519,200323:3648,200324:2687,200325:2922,200326:2592,200327:2647,200328:2502,200329:2024,200330:2847,200331:2096,200401:2434,200402:2209,200403:2250,200404:1761,200405:1580,200406:2020,200407:1697,200408:1558,200409:1457,200410:1180,200411:1018,200412:994,200413:932,200414:938,200415:827,200416:693,200417:571,200418:450,200419:298,200420:319,200421:166,200422:38,200423:26}
		daten200424_meldung = {200305:49,200306:62,200307:26,200308:24,200309:102,200310:150,200311:213,200312:280,200313:445,200314:454,200315:352,200316:645,200317:1073,200318:1173,200319:1239,200320:1292,200321:1038,200322:667,200323:1038,200324:1372,200325:1601,200326:1652,200327:1933,200328:1478,200329:978,200330:1315,200331:1967,200401:2082,200402:2364,200403:2544,200404:1505,200405:967,200406:1452,200407:1863,200408:2078,200409:1975,200410:1309,200411:1355,200412:788,200413:716,200414:1009,200415:1339,200416:1391,200417:1463,200418:907,200419:676,200420:889,200421:1011,200422:1289,200423:516}
		daten200424_symptoms = {"symptoms_n":120243,"cough_symtom":.5*120243,"hospitalized":20325,"pneumonia":3194,"ICU":{"current":2701,"finished":8039,"ventilated":1971,"deaths":2391,"beds":12855,"beds_available":32396,"clinics":1254}}
		daten[200424] = {"bydate":daten200424_begin,"bymeldung":daten200424_meldung,"labtested_n":150383,"deaths":5321,"recovered":106800,"scaling":6000,"R_est":(.9,.7,1.1),"symptoms":daten200424_symptoms}
		
		daten200425_begin = {200216:7,200217:11,200218:7,200219:10,200220:32,200221:21,200222:26,200223:47,200224:65,200225:101,200226:144,200227:154,200228:196,200229:170,200301:190,200302:266,200303:251,200304:341,200305:358,200306:557,200307:727,200308:969,200309:1467,200310:1871,200311:2336,200312:2551,200313:3136,200314:3194,200315:3282,200316:4409,200317:3651,200318:3795,200319:3255,200320:3796,200321:3112,200322:2543,200323:3671,200324:2704,200325:2949,200326:2617,200327:2675,200328:2540,200329:2043,200330:2870,200331:2115,200401:2468,200402:2230,200403:2269,200404:1778,200405:1592,200406:2038,200407:1713,200408:1581,200409:1491,200410:1212,200411:1043,200412:1038,200413:967,200414:997,200415:888,200416:760,200417:653,200418:530,200419:397,200420:417,200421:272,200422:117,200423:52,200424:21}
		daten200425_meldung = {200216:1,200217:0,200218:0,200219:0,200220:1,200221:0,200222:1,200223:0,200224:1,200225:1,200226:1,200227:3,200228:11,200229:4,200301:12,200302:7,200303:26,200304:46,200305:49,200306:62,200307:26,200308:24,200309:102,200310:150,200311:211,200312:276,200313:425,
		200314:446,200315:350,200316:630,200317:1060,200318:1167,200319:1205,200320:1281,200321:1022,200322:652,200323:1030,200324:1332,200325:1580,200326:1621,200327:1900,200328:1463,200329:955,200330:1296,200331:1946,200401:2050,200402:2318,200403:2523,200404:1488,200405:954,200406:1429,200407:1846,200408:2048,200409:1956,200410:1303,200411:1344,200412:773,200413:714,200414:1004,200415:1321,200416:1376,200417:1455,200418:899,200419:655,200420:850,200421:1002,200422:1253,200423:1051,200424:517}
		daten200425_symptoms = {"symptoms_n":122051,"cough_symtom":.5*122051,"hospitalized":20735,"pneumonia":3261,"ICU":{"current":2570,"finished":8165,"ventilated":1883,"deaths":2413,"beds":32354,"beds_available":12922,"clinics":1252}}
		daten[200425] = {"bydate":daten200425_begin,"bymeldung":daten200425_meldung,"labtested_n":152438,"symptoms":daten200425_symptoms,"deaths":5500,"recovered":109800,"scaling":6000,"R_est":(.9,.7,1.1)}
				
		daten200426_begin = {200216: 7, 200217: 11, 200218: 7, 200219: 10, 200220: 34, 200221: 21, 200222: 26, 200223: 47, 200224: 65, 200225: 101, 200226: 146, 200227: 154, 200228: 196, 200229: 170, 200301: 190, 200302: 267, 200303: 252, 200304: 340, 200305: 358, 200306: 559, 200307: 731, 200308: 970, 200309: 1469, 200310: 1879, 200311: 2341, 200312: 2556, 200313: 3148, 200314: 3196, 200315: 3288, 200316: 4421, 200317: 3660, 200318: 3801, 200319: 3265, 200320: 3805, 200321: 3118, 200322: 2550, 200323: 3680, 200324: 2712, 200325: 2955, 200326: 2621, 200327: 2679, 200328: 2547, 200329: 2049, 200330: 2879, 200331: 2116, 200401: 2473, 200402: 2234, 200403: 2283, 200404: 1785, 200405: 1602, 200406: 2057, 200407: 1726, 200408: 1591, 200409: 1512, 200410: 1233, 200411: 1062, 200412: 1055, 200413: 984, 200414: 1016, 200415: 930, 200416: 790, 200417: 690, 200418: 579, 200419: 453, 200420: 510, 200421: 358, 200422: 211, 200423: 112, 200424: 28, 200425: 20}
		daten200426_meldung = {200216: 1, 200217: 0, 200218: 0, 200219: 0, 200220: 1, 200221: 0, 200222: 1, 200223: 0, 200224: 1, 200225: 1, 200226: 1, 200227: 3, 200228: 11, 200229: 4, 200301: 12, 200302: 7, 200303: 26, 200304: 46, 200305: 49, 200306: 62, 200307: 25, 200308: 24, 200309: 101, 200310: 150, 200311: 210, 200312: 277, 200313: 421, 200314: 442, 200315: 350, 200316: 638, 200317: 1058, 200318: 1161, 200319: 1206, 200320: 1278, 200321: 1018, 200322: 652, 200323: 1028, 200324: 1327, 200325: 1571, 200326: 1618, 200327: 1886, 200328: 1458, 200329: 956, 200330: 1291, 200331: 1939, 200401: 2042, 200402: 2313, 200403: 2514, 200404: 1482, 200405: 952, 200406: 1426, 200407: 1826, 200408: 2030, 200409: 1957, 200410: 1298, 200411: 1348, 200412: 768, 200413: 711, 200414: 995, 200415: 1313, 200416: 1367, 200417: 1450, 200418: 889, 200419: 655, 200420: 846, 200421: 987, 200422: 1237, 200423: 1123, 200424: 1065, 200425: 434}
		daten200426_symptoms = {"symptoms_n":123262,"cough_symtom":.5*123262,"hospitalized":21021,"pneumonia":3311,"ICU":{"current":2541,"finished":8230,"ventilated":1857,"deaths":2442,"beds":32067,"beds_available":13183,"clinics":1245}}
		daten[200426] = {"bydate":daten200426_begin,"bymeldung":daten200426_meldung,"labtested_n":154175,"symptoms":daten200426_symptoms,"deaths":5640,"recovered":112000,"scaling":6000,"R_est":(0.9,.8,1.1)}
		
		daten200427_begin = {200216: 7, 200217: 11, 200218: 7, 200219: 10, 200220: 34, 200221: 21, 200222: 26, 200223: 47, 200224: 65, 200225: 101, 200226: 146, 200227: 155, 200228: 195, 200229: 170, 200301: 189, 200302: 267, 200303: 252, 200304: 340, 200305: 358, 200306: 560, 200307: 731, 200308: 970, 200309: 1473, 200310: 1884, 200311: 2343, 200312: 2563, 200313: 3159, 200314: 3198, 200315: 3293, 200316: 4424, 200317: 3667, 200318: 3800, 200319: 3270, 200320: 3814, 200321: 3121, 200322: 2551, 200323: 3686, 200324: 2713, 200325: 2958, 200326: 2621, 200327: 2683, 200328: 2555, 200329: 2051, 200330: 2887, 200331: 2120, 200401: 2479, 200402: 2236, 200403: 2284, 200404: 1789, 200405: 1606, 200406: 2063, 200407: 1732, 200408: 1591, 200409: 1519, 200410: 1239, 200411: 1074, 200412: 1058, 200413: 998, 200414: 1025, 200415: 945, 200416: 807, 200417: 704, 200418: 604, 200419: 476, 200420: 549, 200421: 402, 200422: 269, 200423: 172, 200424: 73, 200425: 24, 200426: 30}
		daten200427_meldung = {200216: 1, 200217: 0, 200218: 0, 200219: 0, 200220: 1, 200221: 0, 200222: 1, 200223: 0, 200224: 1, 200225: 1, 200226: 1, 200227: 3, 200228: 11, 200229: 4, 200301: 12, 200302: 7, 200303: 26, 200304: 46, 200305: 49, 200306: 62, 200307: 25, 200308: 24, 200309: 101, 200310: 150, 200311: 208, 200312: 277, 200313: 419, 200314: 440, 200315: 349, 200316: 638, 200317: 1054, 200318: 1160, 200319: 1206, 200320: 1276, 200321: 1018, 200322: 653, 200323: 1027, 200324: 1327, 200325: 1569, 200326: 1614, 200327: 1882, 200328: 1458, 200329: 954, 200330: 1287, 200331: 1936, 200401: 2035, 200402: 2300, 200403: 2507, 200404: 1479, 200405: 949, 200406: 1425, 200407: 1820, 200408: 2026, 200409: 1954, 200410: 1303, 200411: 1346, 200412: 770, 200413: 708, 200414: 991, 200415: 1308, 200416: 1365, 200417: 1448, 200418: 890, 200419: 658, 200420: 847, 200421: 990, 200422: 1242, 200423: 1116, 200424: 1090, 200425: 752, 200426: 227}
		daten200427_origin = {"origin_n":97150,"DE":82342,"AT":9823,"IT":1669,"CN":2,"NL":72,"TR":76,"GB":173,"EG":196,"US":203,"CH":386,"FR":388,"ES":539,"foreign":262+2781+6454+3814+1095+267+113+31,"domestic":529+2027+8184+16532+20780+16861+10493+6825}
		daten200427_symptoms = {"symptoms_n":124055,"cough_symtom":.5*124055,"hospitalized":21181,"pneumonia":3345,"ICU":{"current":2409,"finished":8351,"ventilated":1729,"deaths":2466,"beds":31516,"beds_available":12789,"clinics":1236}}
		daten[200427] = {"bydate":daten200427_begin,"bymeldung":daten200427_meldung,"labtested_n":155193,"deaths":5750,"recovered":114500,"scaling":6000,"R_est":(1,.8,1.1),"symptoms":daten200427_symptoms,"origin":daten200427_origin}

		daten200428_begin = {200216: 7, 200217: 11, 200218: 7, 200219: 10, 200220: 34, 200221: 21, 200222: 27, 200223: 47, 200224: 65, 200225: 101, 200226: 146, 200227: 155, 200228: 195, 200229: 170, 200301: 190, 200302: 267, 200303: 253, 200304: 342, 200305: 362, 200306: 563, 200307: 735, 200308: 978, 200309: 1480, 200310: 1897, 200311: 2358, 200312: 2587, 200313: 3184, 200314: 3209, 200315: 3307, 200316: 4435, 200317: 3675, 200318: 3809, 200319: 3275, 200320: 3821, 200321: 3134, 200322: 2563, 200323: 3697, 200324: 2723, 200325: 2963, 200326: 2627, 200327: 2692, 200328: 2559, 200329: 2057, 200330: 2891, 200331: 2126, 200401: 2489, 200402: 2244, 200403: 2299, 200404: 1795, 200405: 1616, 200406: 2076, 200407: 1755, 200408: 1606, 200409: 1531, 200410: 1260, 200411: 1091, 200412: 1076, 200413: 1022, 200414: 1055, 200415: 967, 200416: 838, 200417: 751, 200418: 642, 200419: 529, 200420: 621, 200421: 467, 200422: 353, 200423: 277, 200424: 147, 200425: 51, 200426: 14, 200427: 31}
		daten200428_meldung = {200216: 1, 200217: 0, 200218: 0, 200219: 0, 200220: 1, 200221: 0, 200222: 1, 200223: 0, 200224: 1, 200225: 1, 200226: 1, 200227: 3, 200228: 11, 200229: 4, 200301: 12, 200302: 7, 200303: 26, 200304: 46, 200305: 49, 200306: 62, 200307: 25, 200308: 24, 200309: 101, 200310: 150, 200311: 207, 200312: 277, 200313: 419, 200314: 420, 200315: 333, 200316: 621, 200317: 1016, 200318: 1153, 200319: 1201, 200320: 1271, 200321: 1009, 200322: 652, 200323: 1024, 200324: 1317, 200325: 1554, 200326: 1605, 200327: 1874, 200328: 1454, 200329: 950, 200330: 1280, 200331: 1932, 200401: 2024, 200402: 2289, 200403: 2491, 200404: 1467, 200405: 946, 200406: 1419, 200407: 1799, 200408: 2021, 200409: 1933, 200410: 1288, 200411: 1335, 200412: 765, 200413: 701, 200414: 978, 200415: 1293, 200416: 1354, 200417: 1434, 200418: 884, 200419: 651, 200420: 828, 200421: 980, 200422: 1204, 200423: 1097, 200424: 1052, 200425: 779, 200426: 359, 200427: 354}
		daten200428_symptoms = {"symptoms_n":125477,"cough_symtom":.5*125477,"hospitalized":21477,"pneumonia":3391,"ICU":{"current":2467,"finished":8619,"ventilated":1748,"deaths":2534,"beds":32394,"beds_available":13057,"clinics":1251}}
		daten[200428] = {"bydate":daten200428_begin,"bymeldung":daten200428_meldung,"labtested_n":156337,"deaths":5913,"recovered":117400,"scaling":6000,"R_est":(0.9,.7,1),"symptoms":daten200428_symptoms}
			
		daten200429_begin = {200216: 7, 200217: 11, 200218: 7, 200219: 10, 200220: 34, 200221: 22, 200222: 27, 200223: 47, 200224: 65, 200225: 103, 200226: 146, 200227: 155, 200228: 195, 200229: 172, 200301: 191, 200302: 269, 200303: 253, 200304: 344, 200305: 362, 200306: 563, 200307: 738, 200308: 979, 200309: 1483, 200310: 1902, 200311: 2361, 200312: 2598, 200313: 3191, 200314: 3219, 200315: 3318, 200316: 4446, 200317: 3686, 200318: 3818, 200319: 3287, 200320: 3838, 200321: 3148, 200322: 2570, 200323: 3711, 200324: 2740, 200325: 2976, 200326: 2640, 200327: 2709, 200328: 2575, 200329: 2068, 200330: 2900, 200331: 2144, 200401: 2508, 200402: 2255, 200403: 2320, 200404: 1807, 200405: 1625, 200406: 2089, 200407: 1765, 200408: 1609, 200409: 1548, 200410: 1275, 200411: 1100, 200412: 1083, 200413: 1032, 200414: 1071, 200415: 987, 200416: 859, 200417: 795, 200418: 691, 200419: 572, 200420: 691, 200421: 523, 200422: 425, 200423: 357, 200424: 194, 200425: 117, 200426: 51, 200427: 50, 200428: 17}
		daten200429_meldung = {200216: 1, 200217: 0, 200218: 0, 200219: 0, 200220: 1, 200221: 0, 200222: 1, 200223: 0, 200224: 1, 200225: 1, 200226: 1, 200227: 3, 200228: 11, 200229: 4, 200301: 12, 200302: 7, 200303: 27, 200304: 46, 200305: 49, 200306: 62, 200307: 25, 200308: 24, 200309: 101, 200310: 149, 200311: 206, 200312: 278, 200313: 414, 200314: 418, 200315: 334, 200316: 618, 200317: 1012, 200318: 1147, 200319: 1198, 200320: 1261, 200321: 996, 200322: 652, 200323: 1022, 200324: 1303, 200325: 1545, 200326: 1597, 200327: 1836, 200328: 1441, 200329: 948, 200330: 1276, 200331: 1914, 200401: 2009, 200402: 2276, 200403: 2478, 200404: 1453, 200405: 943, 200406: 1404, 200407: 1790, 200408: 2007, 200409: 1923, 200410: 1278, 200411: 1320, 200412: 758, 200413: 697, 200414: 973, 200415: 1278, 200416: 1346, 200417: 1425, 200418: 882, 200419: 649, 200420: 821, 200421: 964, 200422: 1178, 200423: 1069, 200424: 976, 200425: 747, 200426: 363, 200427: 602, 200428: 467}
		daten200429_symptoms = {"symptoms_n":126880,"cough_symtom":.5*126880,"hospitalized":21837,"pneumonia":3465,"ICU":{"current":2415,"finished":8896,"ventilated":1719,"deaths":2603,"beds":32824,"beds_available":12895,"clinics":1262}}
		daten[200429] = {"bydate":daten200429_begin,"bymeldung":daten200429_meldung,"labtested_n":157641,"deaths":6115,"scaling":6000,"R_est":(.75,.64,.87),"symptoms":daten200429_symptoms,"recovered":120400}
		
		daten200430_begin = {200216: 7, 200217: 11, 200218: 8, 200219: 10, 200220: 34, 200221: 22, 200222: 27, 200223: 46, 200224: 65, 200225: 103, 200226: 146, 200227: 155, 200228: 195, 200229: 172, 200301: 192, 200302: 269, 200303: 253, 200304: 346, 200305: 362, 200306: 567, 200307: 742, 200308: 985, 200309: 1488, 200310: 1908, 200311: 2369, 200312: 2623, 200313: 3203, 200314: 3232, 200315: 3337, 200316: 4474, 200317: 3714, 200318: 3842, 200319: 3306, 200320: 3858, 200321: 3173, 200322: 2593, 200323: 3726, 200324: 2757, 200325: 2992, 200326: 2665, 200327: 2727, 200328: 2587, 200329: 2076, 200330: 2915, 200331: 2157, 200401: 2525, 200402: 2268, 200403: 2327, 200404: 1821, 200405: 1633, 200406: 2101, 200407: 1782, 200408: 1624, 200409: 1561, 200410: 1285, 200411: 1111, 200412: 1099, 200413: 1048, 200414: 1087, 200415: 1005, 200416: 871, 200417: 827, 200418: 720, 200419: 603, 200420: 732, 200421: 569, 200422: 483, 200423: 445, 200424: 287, 200425: 206, 200426: 171, 200427: 127, 200428: 26, 200429: 20}
		daten200430_meldung = {200216: 1, 200217: 0, 200218: 0, 200219: 0, 200220: 1, 200221: 0, 200222: 1, 200223: 0, 200224: 1, 200225: 1, 200226: 1, 200227: 3, 200228: 11, 200229: 4, 200301: 12, 200302: 7, 200303: 27, 200304: 46, 200305: 49, 200306: 61, 200307: 25, 200308: 24, 200309: 101, 200310: 149, 200311: 204, 200312: 279, 200313: 416, 200314: 415, 200315: 333, 200316: 615, 200317: 987, 200318: 1098, 200319: 1175, 200320: 1251, 200321: 994, 200322: 648, 200323: 1016, 200324: 1286, 200325: 1534, 200326: 1585, 200327: 1811, 200328: 1403, 200329: 945, 200330: 1255, 200331: 1896, 200401: 1993, 200402: 2233, 200403: 2456, 200404: 1449, 200405: 930, 200406: 1391, 200407: 1780, 200408: 1987, 200409: 1909, 200410: 1268, 200411: 1311, 200412: 754, 200413: 694, 200414: 966, 200415: 1266, 200416: 1332, 200417: 1416, 200418: 873, 200419: 644, 200420: 818, 200421: 950, 200422: 1156, 200423: 1053, 200424: 971, 200425: 720, 200426: 359, 200427: 619, 200428: 715, 200429: 426}
		daten200403_symptoms = {"symptoms_n":128635,"cough_symtom":.5*128635,"hospitalized":22216,"pneumonia":3545,"ICU":{"current":2280,"finished":9194,"ventilated":1605,"deaths":2655,"beds":32691,"beds_available":12792,"clinics":1256}}
		daten[200430] = {"bydate":daten200430_begin,"bymeldung":daten200430_meldung,"labtested_n":159119,"deaths":6288,"scaling":6000,"R_est":(.76,.64,.89),"symptoms":daten200403_symptoms,"recovered":123500}
		
		daten200501_begin = {200216: 7, 200217: 11, 200218: 8, 200219: 10, 200220: 34, 200221: 22, 200222: 26, 200223: 46, 200224: 64, 200225: 103, 200226: 147, 200227: 155, 200228: 196, 200229: 173, 200301: 193, 200302: 268, 200303: 253, 200304: 347, 200305: 362, 200306: 571, 200307: 743, 200308: 983, 200309: 1495, 200310: 1910, 200311: 2378, 200312: 2635, 200313: 3212, 200314: 3237, 200315: 3360, 200316: 4487, 200317: 3729, 200318: 3864, 200319: 3320, 200320: 3887, 200321: 3177, 200322: 2614, 200323: 3750, 200324: 2779, 200325: 3023, 200326: 2675, 200327: 2742, 200328: 2596, 200329: 2088, 200330: 2927, 200331: 2166, 200401: 2540, 200402: 2275, 200403: 2344, 200404: 1834, 200405: 1644, 200406: 2115, 200407: 1798, 200408: 1639, 200409: 1581, 200410: 1298, 200411: 1120, 200412: 1119, 200413: 1067, 200414: 1108, 200415: 1033, 200416: 899, 200417: 859, 200418: 750, 200419: 635, 200420: 785, 200421: 594, 200422: 542, 200423: 512, 200424: 387, 200425: 280, 200426: 243, 200427: 240, 200428: 107, 200429: 48, 200430: 17}
		daten200501_meldung = {200216: 1, 200217: 0, 200218: 0, 200219: 0, 200220: 1, 200221: 0, 200222: 1, 200223: 0, 200224: 1, 200225: 1, 200226: 1, 200227: 3, 200228: 11, 200229: 4, 200301: 12, 200302: 7, 200303: 27, 200304: 46, 200305: 49, 200306: 61, 200307: 25, 200308: 24, 200309: 102, 200310: 150, 200311: 204, 200312: 279, 200313: 414, 200314: 411, 200315: 333, 200316: 611, 200317: 988, 200318: 1091, 200319: 1165, 200320: 1245, 200321: 985, 200322: 645, 200323: 1013, 200324: 1284, 200325: 1522, 200326: 1578, 200327: 1776, 200328: 1366, 200329: 939, 200330: 1246, 200331: 1871, 200401: 1977, 200402: 2211, 200403: 2427, 200404: 1445, 200405: 927, 200406: 1381, 200407: 1764, 200408: 1964, 200409: 1885, 200410: 1255, 200411: 1306, 200412: 746, 200413: 685, 200414: 954, 200415: 1251, 200416: 1316, 200417: 1405, 200418: 860, 200419: 640, 200420: 802, 200421: 934, 200422: 1139, 200423: 1017, 200424: 941, 200425: 693, 200426: 335, 200427: 612, 200428: 719, 200429: 774, 200430: 501}
#		daten200501_symptoms = {"symptoms_n":,"cough_symtom":,"hospitalized":,"pneumonia":,"ICU":{"current":,"finished":,"ventilated":,"deaths":,"beds":,"beds_available":,"clinics":}}
		daten[200501] = {"bydate":daten200501_begin,"bymeldung":daten200501_meldung,"labtested_n":160758,"deaths":6481,"scaling":6000,"R_est":()}#,"symptoms":daten200501_symptoms,"recovered":}

	# Template
		# daten200501_begin = {}
		# daten200501_meldung = {}
		# daten200501_symptoms = {"symptoms_n":,"cough_symtom":,"hospitalized":,"pneumonia":,"ICU":{"current":,"finished":,"ventilated":,"deaths":,"beds":,"beds_available":,"clinics":}}
		# daten[200501] = {"bydate":daten200501_begin,"bymeldung":daten200501_meldung,"labtested_n":,"deaths":,"scaling":,"R_est":()}#,"symptoms":daten200501_symptoms,"recovered":}
		
		
		# Data from RKI-Bulletin 09.04.2020 Observed / Extrapolated
		daten_obseved = {200225:42,200226:77,200227:105,200228:126,200229:140,200301:161,200302:203,200303:245,200304:273,200305:301,200306:399,200307:532,200308:728,200309:1001,200310:1336,200311:1756,200312:2091,200313:2455,200314:2734,200315:2923,200316:3301,200317:3413,200318:3503,200319:3154,200320:3126,200321:2902,200322:2664, 200323:2580,200324:2462,200325:2510,200326:2189,200327:2091,200328:1923,200329:1699,200330:1629,200331:1420,200401:1336,200402:1070,200403:867,200404:552}
		daten_imputiert = {200225:14,200226:28,200227:35,200228:28,200229:35,200301:42,200302:42,200303:49,200304:77,200305:119,200306:168,200307:231,200308:322,200309:447,200310:609,200311:798,200312:1063,200313:1328,200314:1511,200315:1678,200316:1748,200317:1811,200318:1833,200319:1804,200320:1783,200321:1685,200322:1623,200323:1609, 200324:1601,200325:1651,200326:1580,200327:1531,200328:1455,200329:1371,200330:1322,200331:1300,200401:1258,200402:1112,200403:902,200404:658}
		for k,v in daten_imputiert.items():
			daten_imputiert[k] = v + daten_obseved[k]

		daten_NK_L = {200225:56,200226:63,200227:98,200228:126,200229:140,200301:154,200302:210,200303:252,200304:336,200305:392,200306:546,200307:728,200308:1015,200309:1408,200310:1898,200311:2507,200312:3046,200313:3620,200314:4076,200315:4454,200316:4937,200317:5126 ,200318:5287,200319:4881,200320:4888,200321:4636,200322:4384,200323:4300,200324:4265,200325:4405,200326:4132,200327:4069,200328:3978,200329:3824,200330:3964,200331:4027,200401:4258,200402:4335,200403:4258,200404:3775}
		daten_NK_H = {200225:35,200226:70,200227:42,200228:56,200229:70,200301:70,200302:49,200303:70,200304:70,200305:63,200306:91,200307:105,200308:77,200309:112,200310:203,200311:231,200312:280,200313:372,200314:434,200315:490,200316:581,200317:693 ,200318:735,200319:777,200320:840,200321:882,200322:875,200323:987,200324:1085,200325:1281,200326:1358,200327:1624,200328:1876,200329:2086,200330:2549,200331:2920,200401:3697,200402:4271,200403:4965,200404:5462}
		daten_NK = {}
		for k,v in daten_NK_H.items():
			low = daten_NK_L[k]
			daten_NK_H[k] = v + low
			daten_NK[k] = int(low + v/2)
	
		
		days_rki = sorted(daten_obseved.keys())
		ddays_rki = {}
		for i,v in enumerate(days_rki):
			ddays_rki[v] = i
			
		daten_rki200409 = {}
		for k,d in {"bydate_observed":daten_obseved,"bydate_imputiert":daten_imputiert,"bydate_Nowcast":daten_NK,"bydate_Nowcast_high":daten_NK_H,"bydate_Nowcast_low":daten_NK_L}.items():
			daten_rki200409[k] = [d[k] for k in sorted(d.keys())]
		daten_rki = {"days":days_rki,"ddays":ddays_rki,200409:daten_rki200409}
		
		return daten,daten_rki
		
	def Test(self):
		for m in [1,2,3,4]:	
			for day in range({1:23}.get(m,1),{1:31,2:29,3:31,4:5}[m]+1):
				d = 200000+m*100+day
		
		
				s,s2,l = "%02d.%02d.\t"%(day,m),"",0
				for k in sorted(self.dates.keys()):
					dbydate = self.dates[k]["bydate"].get(d,None)
					dbymeld = self.dates[k]["bymeldung"].get(d,None)
	
					if dbydate != None:
						s2 += "%d\t"%dbydate
					# if bydate != None:
	#					if dbymeld != None:
	#						s2 += "%d/%d "%(dbydate,dbymeld)
	#					else:
	#						s2 += "%d/_ "%(dbydate)
	##				else:
	#					if dbymeld != None:
	#						s2 += "_/%d "%(dbymeld)
					if dbydate != None or dbymeld != None:
						l += 1
				s += "%d\t"%l
				#print(s+s2)
		
		

class ByDateOfOnset(object):
	def __init__(self):
		self.startdate,self.ndates = 200216,0
		
		self.datasets = {}
		
		self.raw = GenByDateOfOnset()
		self.Cummulate()
		self.Cleanup()
		self.Deltas()

		
		
	def nextDay(self,day):
		y,m,d,f = day//10000,(day//100)%100,day%100,28
		if y%4 == 0:
			f = 29
		days = {1:31,2:f,3:31,4:30,5:31,6:30,7:31,8:31,9:30,10:31,11:30,12:31}
		d += 1 
		if days[m] < d:
			d,m = 1,m+1
		if m == 13:
			m,y = 1,y+1
		return y*10000+m*100+d,y,m,d
		
	def Cummulate(self):
		maxdate = max(self.raw.dates.keys())
		#print(maxdate,self.raw.dates.keys())
		days = [self.startdate]
		while days[-1] < maxdate:
			days.append(self.nextDay(days[-1])[0])
		self.ndays = len(days)
		# DateIndex
		ddays = {}
		for i,d in enumerate(days):
			ddays[d] = i
		
		#print(days)
		#print(ddays)
		
		onsets,meldungs,infos = [[0]*self.ndays],[[0]*self.ndays],[]
		rdates,ddates = sorted(self.raw.dates.keys()),{}
		for i,k in enumerate(rdates):
			ddates[k] = i
			onset = list(onsets[-1])
			meldung = list(meldungs[-1])
			dbydates = self.raw.dates[k]["bydate"]
			dbymelds = self.raw.dates[k]["bymeldung"]
			
			for d,l,last, in [(onset,dbydates,onsets),(meldung,dbymelds,meldungs)]:
				for date,n in l.items():
					di = ddays.get(date,None)	# Entry in the list of days
					if di != None:
						if n > 0:
							d[di] = n
					
			onsets.append(onset)
			meldungs.append(meldung)
			
			info = {}
			rinfo = self.raw.dates[k]
			info["scaling"] = rinfo.get("scaling",1)
			info["labtested_n"] = rinfo.get("labtested_n",0)
			infos.append(info)
			
		onsets,meldungs = onsets[1:],meldungs[1:]
		
		
	# List of Datasets for every date with a report, 
		self.datasets["infos"] = infos
		self.datasets["onsets_raw"] = onsets		# Each date contains entrys for every day between startdate and the last date of reporting
		self.datasets["meldungs_raw"] = meldungs
		self.days = days	# days with data in continous range from startdate
		self.ddays = ddays
		self.dates = rdates	# reporting dates
		self.ddates = ddates
		self.infos = infos
		
	def PrintDataset(self,name):
		print(name)
		for k,d in zip(self.dates,self.datasets[name]):
			print(k,"\t".join(map(str,d)))
		
	def Cleanup(self):
		t1 = time.time()
		for ds,sdname,cleanup, in [(self.datasets["onsets_raw"],"onsets",True,),(self.datasets["meldungs_raw"],"meldungs",False)]:
			scale = [x.get("scaling",1) for x in self.datasets["infos"]]
			#print(scale)
			perdays = [None]*len(self.days)
			newdata = [None]*len(self.dates)
			for d in range(len(self.dates)):
				newdata[d] = [0]*len(self.days)
			
			
			for i,day in enumerate(self.days):
				perday = [0]*len(self.dates)
				for j,date in enumerate(self.dates):
					perday[j] = ds[j][i]
				
				if cleanup:	
					# Check monoton
					lv,monoton = perday[0],True
					for p in perday:
						if p < lv:
							monoton = False
							break
						lv = p
					# Do the Cleanup: fix tail: find max -> mv, first index of max --> mi, average over all postions after first max --> mmv, take max(mmv,v[mi-1]) --> fill out (might do weighting on inverse scaling) , last: always count up!
					if not monoton:
						mv = max(perday)
						mi = perday.index(mv)
					# fix tail
					#	print(i,day,"\t",monoton,mv,mi,0,0,"\t",perday)
						if mi < len(perday)-1:
							smv = sum(perday[mi:])
							mmv = int(smv/(1.*(len(perday)-mi)))
							mmv = max(mmv,perday[mi-1])
							for k in range(mi,len(perday)):
								perday[k] = mmv
					# fix monotony
						lv = perday[0]
						for k in range(mi):
							if perday[k] < lv:
							#	vs = perday[max(0,k-1):k]
								perday[k] = lv
							else:
#								vs = perday[k:k+1]
#								lv = int(vs / (1.*len(vs)) )
								lv = perday[k]
					#	print(i,day,"\t",monoton,mv,mi,smv,mmv,"\t",perday)
				perdays[i] = perday
				
			for j in range(len(self.dates)):
				for i in range(len(self.days)):
					newdata[j][i] = perdays[i][j]
			self.datasets[sdname] = newdata
			self.datasets[sdname+"_perday"] = perdays
			
#			self.PrintDataset(sdname)
		
	def Deltas(self):
		for dsname in ["onsets","meldungs_raw"]:
			ds = self.datasets[dsname]
			nds = [None]*len(self.dates)
			diffs = [None]*len(self.dates)
			tdiffs = [None]*len(self.days)
			for j in range(len(self.dates)):
				diffs[j] = [0]*len(self.days)
			for i in range(len(self.days)):
				tdiffs[i] = [0]*len(self.dates)
			for i,day in enumerate(self.days):
				ld = 0
				for j,dates in enumerate(self.dates):
					v = ds[j][i]
					diffs[j][i] = v-ld
					tdiffs[i][j] = v-ld
					ld = v
				
			
			self.datasets[dsname+"_diff"] = diffs
#			self.PrintDataset(dsname+"_diff")

	def Dataset(self,name="situation_report"):
		if name == "situation_report":
			sit = {"days":self.days,"ddays":self.ddays,"dates":self.dates,"ddates":self.ddates,"datasets":self.datasets}
			return sit
		elif name == "bulletin":
			rb = self.raw.byDateOfReporting_RKI
			ds = {}
			date = 200409
			for k,v in rb[date].items():
				ds[k] = [v]
			bullet = {"days":rb["days"],"ddays":rb["ddays"],"dates":[date],"ddates":{date:1},"datasets":ds}
			return bullet
	
			
	def Plot(self,dsname):
		ds = self.datasets[dsname]
		
		plasma = plt.cm.plasma
		
		fig = plt.figure(1,figsize=(15,12.5),frameon=True)
		fig.subplots_adjust(wspace=0.15,hspace=0.14,left=0.05,right=0.98,top=0.965,bottom=0.05)
		bx = plt.subplot(221)
		ax = plt.subplot(222)
		cx = plt.subplot(223)
		dx = plt.subplot(224)
		
		legend = []
		
		o,p = 1,2
		l = len(ds)
		mds = ds[:-4][o::p]+ds[-4:]	# my dataset
		ids = list(range(o,l-4,p))+[l-4,l-3,l-2,l-1]
		omit = [200319]
		dxl = []
		l = len(mds)
		for i,j,dd in zip(range(len(ids)),ids,mds):
			#j = o+i*p
			if self.dates[j] not in omit:
				dd = dd[:self.ddays[self.dates[j]]+2]
#				c = (1-i/(1.*l),0,i/(1.*l))
				c = plasma( i/(1.*len(ids)-1) )
				a = np.array(dd)
				ma = np.ma.masked_where(a == 0,a)
			#	ax.semilogy( range(len(dd)), ma,color=c,alpha=.7 )
				
				
				dn = self.infos[j]["labtested_n"]-self.infos[j-1]["labtested_n"]
				label = "%d n=%d/%d"%(self.dates[j],sum([abs(x) for x in dd]),dn)
				
				s = a/sum(np.abs(a))
				if j >= ids[-1]:
					bx.plot(range(len(dd)), ma,color=(0,0,0) ,zorder=0,alpha=.7,label=label,gid="by_onset_%d"%(self.dates[j]) )
					cx.plot(range(len(dd)),s,color=(0,0,0),alpha=.7)
					dx.plot(-np.array(range(len(dd)))+(l+j)-11,s,color=(0,0,0),alpha=0.7,zorder=l-j)
				else:
					bx.fill(range(len(dd)), ma,color=c ,zorder=l-j,alpha=.5,label=label)
					cx.fill(range(len(dd)),s,color=c,alpha=.7)
					dx.plot(-np.array(range(len(dd)))+(l+j)-11,s,color=c,alpha=.7*(min(1,(10+i)/30.)),zorder=l-j)
				
				
		
		bx.set_xticks(range(len(self.days))[::2])
		bx.set_xticklabels(self.days[::2],rotation=40,horizontalalignment='right')
		cx.set_xticks(range(len(self.days))[::2])
		cx.set_xticklabels(self.days[::2],rotation=40,horizontalalignment='right')
		
		dx.set_xlim(-2,35)
		
		#print(self.datasets.keys(),dsname)
		
		print(self.datasets.keys())
		dbyd = self.datasets.get(dsname.split("_")[0]+"_perday",None)
		if dbyd != None:
			for i,dd in enumerate(dbyd):
				c = plasma( i/(1.*len(dbyd)) )
				a = np.array(dd) / dd[-1]
			#	b = np.linspace(0,self.ddays[self.dates[i]],1)
				b = np.array(range(len(dd)))-i+self.ddays[self.dates[0]]
				
				ax.plot(b,a,color=c,alpha=.9*(min(1,(10+i)/30.)))
			
		
		# Beta Distribution Test
		x = np.linspace(0,40,41)
		print(x)
		
		
		a,b,ll,sc = beta.fit([1/8.]*10+[1/4.]*40+[1/2.]*40+[3/4.]*10)
		for a,b in [(2.4,6.5)]:#,(2,6),,(2.6,4.4)]:	# early best, 2/6 optimisitc,  late best for march	#,(2.45,5.9)
			ax.plot(x,beta.cdf(x/40.,a,b) ,"b--",linewidth=2.)
		ax.text(25,0.4,r"Beta-CDF($\alpha=2.4,\beta=6.5$)")
		ax.plot([22,24],[0.41,0.41],"b--",linewidth=2.)
		
		print(beta.cdf(np.array([1/8.,1/4.,1/2.,3/4.,1]),a,b))
		print(beta.pdf(x/40,2.4,6.5))
		ax.set_xlim(-1,40)
		bx.legend(loc=2)
		
		bx.set_title("daily distribution of cases with known onset of illness per report")
		
		cx.set_title("same as above, scaled for unity area")
		bx.set_ylabel("cases per day in a report")
		cx.set_ylabel("proportion per day in a report")
		dx.set_title("same as left, but mirrored and shifted")
		dx.set_xlabel("days since onset of illness on day of reporting (distribution)")
		
		ax.set_title("cummulative distribution of cases for every date (not report) by days since onset of illness")
		ax.set_xlabel("days since onset of onset of illness on day of report = days since first reported onset for a date")
		ax.set_ylabel("commulative proportion per date")
		
		plt.savefig("%s.pdf"%dsname)##
		plt.savefig("page/graph/%s.svg"%dsname)##
		plt.close()
	
	def PlotOverview(self):
		
		fig = plt.figure(1,figsize=(15,12.5),frameon=True)
		fig.subplots_adjust(wspace=0.13,hspace=0.1,left=0.05,right=0.98,top=0.965,bottom=0.05)
		ax = plt.subplot(211)
		plasma = plt.cm.plasma
	
		mds = self.datasets["onsets"]
		l = len(mds)
		for i,dd in enumerate(self.datasets["onsets"]):
			c = plasma( i/(1.*l-1) )
			if (l-i-1)%7 == 0:
				c = (1,0,1)
			ax.bar(range(len(dd)),dd,zorder=l-i,color=c,alpha=.9)

		l = len(self.datasets["meldungs_raw"])
		for i,dd in enumerate(self.datasets["meldungs_raw"]):
			a1 = np.array(self.datasets["onsets"][-1])
			a2 = np.array(dd)
			c = plt.cm.Greys(i/(1.*l))
			if (l-i-1)%7 == 0:
				c = (.6,0,.6)
			ax.bar(range(len(self.days)),a1+a2,color=c,zorder=-l-i)
		
		
		plt.savefig("test.pdf")
		plt.close()
	
	def ExportRKIBulletin200409(self):
		rki = self.raw.byDateOfReporting_RKI
		charts = ["bydate_observed","bydate_imputiert","bydate_Nowcast_low","bydate_Nowcast","bydate_Nowcast_high"]
		csum = {}
		for k in charts:
			csum[k] = 0
			
		onset_sum = 0 # get latest observe
		ds = "dmy_date,dayily_obs,"+",".join(charts)+"\n"
		for i,day in enumerate(rki["days"]):
			y,m,d,f = day//10000,(day//100)%100,day%100,28
			onset_sum += self.datasets["onsets"][-1][self.ddays[day]]
			s = "%02d-%02d-%d"%(d,m,y+2000) + ",%d"%onset_sum
			for k in charts:
				v = rki[200409][k][i]
				csum[k] += v
				s += ",%d"%(csum[k])
			ds += s+"\n"
		print(ds)
		f = open("rki_bulletin200409_EpiCurve.csv","w+")
		f.write(ds)
		f.close()
	
	def DumpJSON(self,fname="page/script/data.json"):
		ex = {"dates":self.dates,"ddates":self.ddates,"days":self.days,"ddays":self.ddays,"datasets":self.datasets}
		f = open(fname,"w+")
		f.write("/*Data for onset_of_illness derived from RKIs daily situation report on COVID-19 https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Situationsberichte/Gesamt.html\ndates : dates with situation report\ndays : dates with available data from situation reports\nddates/ddays : dictionaries to reverse lookup dates/days from indices\ndatasets : collection of similar data for each situation report _date_, arrays contain data for each _day_\n\nRefer to http://mlinden.de/COVID19/index.html or contact: matthias.linden@gmx.de */\n")
		f.write("data = ")
		json.dump(ex,f)
		f.write(";\n")
		f.write("/*Dataset from RKI Bulletin from https://www.rki.de/DE/Content/Infekt/EpidBull/Archiv/2020/Ausgaben/17_20_SARS-CoV2_vorab.pdf?__blob=publicationFile, same formating, contains total counts for observed,imputiert,Nowkast+95 hight/low*/\n")
		f.write("rki_data200409=")
		rki = self.raw.byDateOfReporting_RKI
		json.dump({"dates":[200409],"ddates":{200409:1},"days":rki.pop("days"),"ddays":rki.pop("ddays"),"datasets":rki},f)
		f.close()
		
		f = open("page/data/epicurve.pickle","wb+")
		pickle.dump(ex,f)
		f.close()
		
	def PlotAdditionalData(self):
		fig = plt.figure(1,figsize=(15,12.5),frameon=True)
		fig.subplots_adjust(wspace=0.13,hspace=0.1,left=0.05,right=0.98,top=0.965,bottom=0.05)
		ax = plt.subplot(211)
		bx = plt.subplot(212)
		plasma = plt.cm.plasma
	
		mds = self.datasets["onsets"]
		raw = self.raw.byDateOfReporting
		
		datasets = {"deaths":[[],[],[0]]}
		for i,k in enumerate(sorted(raw.keys())):
			rds = raw[k]
			print(i,k,rds.get("deaths",0),rds["symptoms"])
			
			deaths = rds.get("deaths")
			if deaths != None:
				datasets["deaths"][0].append(i)
				datasets["deaths"][1].append(deaths)
				datasets["deaths"][2].append(datasets["deaths"])
		
		
		
		print(datasets)
		
		plt.savefig("AdditionalData.pdf")
		plt.close()
		
	def DumpSituationReport(self,export=True):
		data = self.raw.byDateOfReporting
		#df = pd.DataFrame()
			
		icu_columns =["current","finished","ventilated","deaths","beds","beds_available","clinics"]
		columns = ["deaths","reported","est_recovered","with_symptoms_reported","symptom_no_symptoms","hospitalized","symptom_cough","symptom_pneumonia"]+["ICU_"+a for a in icu_columns]+["EpiCurve_onset_known","EpiCurve_onset_unknown","origin_foreign","origin_domestic"]
		odata = {"date":[]}
		for c in columns:
			odata[c] = []
		
		sdates = sorted(data.keys())
		latest_epicurve = data[sdates[-1]]
		epi_k,epi_uk = 0,0
		for k in latest_epicurve["bydate"].keys():
			if k < sdates[0]:
				 epi_k += latest_epicurve["bydate"].get(k,0)
		for k in latest_epicurve["bymeldung"].keys():
			if k < sdates[0]:
				 epi_uk+= latest_epicurve["bymeldung"].get(k,0)
				 print(k)
		print("Starting Epi Curve at ",epi_k,epi_uk)
		for i,k in enumerate(sdates):
			y,m,d = k//10000,(k//100)%100,k%100
			date = datetime.date(2000+y,m,d)
			#date = rdate-datetime.timedelta(days=1)
			days_data = data[k]
			
			#	daten200421_symptoms = {"symptoms_n":113051,"cough_symtom":.5*113051,"hospitalized":18766,"pneumonia":2940,"ICU":{"current":2908,"finished":7037,"ventilated":2112,"deaths":2146,"beds":31244,"beds_available":12623,"clinics":1222}}
#				daten[200421] = {"bydate":daten200421_begin,"bymeldung":daten200421_meldung,"labtested_n":143457,"symptoms":daten200421_symptoms,"deaths":4598,"recovered":95200,"scaling":6000,"R_est":(.9,.8,1.1)}
			# "symptoms_n":108,"no_symtmom":7
			
			odata["date"].append(date)
			for a,b in {"deaths":"deaths","reported":"labtested_n","est_recovered":"recovered"}.items():
				odata[a].append(days_data.get(b))
			for a,b in {"with_symptoms_reported":"symptoms_n","hospitalized":"hospitalized","symptom_cough":"cough_symtom","symptom_pneumonia":"pneumonia","symptom_no_symptoms":"no_symtmom"}.items():
				v = days_data.get("symptoms",{}).get(b)
		#		print(a,b,v)
				odata[a].append(v)
			for a in ["current","finished","ventilated","deaths","beds","beds_available","clinics"]:
				odata["ICU_"+a].append(days_data.get("symptoms",{}).get("ICU",{}).get(a))
		#	print(k,days_data.keys())
			
			# Process origin
			origin = days_data.get("origin",{})
			foreign,domestic = 0,0
			if origin != None:
				for cc,cd in origin.items():
					if len(cc) == 2 and cc != "DE":
						foreign += cd
					elif len(cc) == 5:
						domestic += cd
					else:
						pass
					#	print(cc,cd)	
			cforeign = max(origin.get("foreign",0),foreign)
			cdomestic= max(origin.get("domestic",0),domestic)
			if cforeign != 0:
				odata["origin_foreign"].append(cforeign)
			else:
				odata["origin_foreign"].append(np.nan)
			if cdomestic != 0:
				odata["origin_domestic"].append(cdomestic)
			else:
				odata["origin_domestic"].append(np.nan)
				
			
			if i > 0:
				k2 = (date.year%100)*10000+date.month*100+date.day
				epi_k += latest_epicurve["bydate"].get(k2,np.nan)
				epi_uk+=latest_epicurve["bymeldung"].get(k2,np.nan)
			odata["EpiCurve_onset_known"].append( epi_k )
			odata["EpiCurve_onset_unknown"].append( epi_uk )
#			odata["report_published"].append(rdate)
			
		
		for k,v in odata.items():
#			if k in ["hospitalized","symptom_cough","symptom_pneumonia","no_symptoms"]:
#				odata[k] = pd.Series(v, dtype=np.dtype("int32")),
			print(k,len(v))
			
			
		df = pd.DataFrame(odata,columns=columns,index=odata["date"])
		for k in columns:#["hospitalized","symptom_cough","symptom_pneumonia","no_symptoms","deaths","est_recovered"]:
			if k not in ["date"]:
				df[k] = df[k].convert_dtypes(convert_integer=True)
#		df.rename(index={0:"date"})
		
		print(df.dtypes)
		print(df)
		
		if export:
			with open("page/data/latest_report.csv","w+") as f:
				f.write( datetime.datetime.now().isoformat()+"\n" )
				df.to_csv(f,sep=";")
			
		return df
		
def main():
	bydate = ByDateOfOnset()
	#bydate.ExportRKIBulletin200409()
	#bydate.Dataset("bulletin")

	bydate.DumpSituationReport()
	
	bydate.Plot("onsets_diff")
	bydate.Plot("meldungs_raw_diff")
	
#	bydate.PlotAdditionalData()
	
	bydate.DumpJSON()
	
	#		self.raw.Test()
		
		#		
		
	#		self.PlotOverview()


if __name__=="__main__":
	print("RunMain")
	main()
